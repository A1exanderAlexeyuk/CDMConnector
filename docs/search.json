[{"path":[]},{"path":"/CONTRIBUTING.html","id":"filing-issues","dir":"","previous_headings":"","what":"Filing issues","title":"Contributing to CDMConnector","text":"found bug, question, want suggest new feature please open issue. reporting bug, reprex much appreciated.","code":""},{"path":"/CONTRIBUTING.html","id":"contributing-code-or-documentation","dir":"","previous_headings":"","what":"Contributing code or documentation","title":"Contributing to CDMConnector","text":"package developed part DARWIN EU(R) project closed external contributions. contributing either documentation code, please make sure open issue beforehand identify needs done .","code":""},{"path":"/CONTRIBUTING.html","id":"documenting-the-package","dir":"","previous_headings":"Contributing code or documentation","what":"Documenting the package","title":"Contributing to CDMConnector","text":"Run update check package documentation: Note devtools::check_man() return warnings. commit limited package documentation, running sufficient (although running devtools::check() always generally good idea submitting pull request.","code":"devtools::document()  devtools::run_examples() devtools::build_readme() devtools::build_vignettes() devtools::check_man()"},{"path":"/CONTRIBUTING.html","id":"run-tests","dir":"","previous_headings":"Contributing code or documentation","what":"Run tests","title":"Contributing to CDMConnector","text":"starting contribute code, first make sure package tests passing. raise issue going (although please first make sure packages imports suggests installed). contribute code, make sure current tests add continue pass. package tests can run together : Code add new functionality accompanied tests. Code coverage can checked using:","code":"devtools::test() # note, you may first have to detach the package # detach(\"package:IncidencePrevalence\", unload=TRUE) devtools::test_coverage()"},{"path":"/CONTRIBUTING.html","id":"adhere-to-code-style","dir":"","previous_headings":"Contributing code or documentation","what":"Adhere to code style","title":"Contributing to CDMConnector","text":"Please adhere code style adding new code. though restyle code unrelated pull request make code review difficult.","code":"lintr::lint_package(\".\",                     linters = lintr::linters_with_defaults(                       lintr::object_name_linter(styles = \"camelCase\")                     ) )"},{"path":"/CONTRIBUTING.html","id":"run-check-before-opening-a-pull-request","dir":"","previous_headings":"Contributing code or documentation","what":"Run check() before opening a pull request","title":"Contributing to CDMConnector","text":"opening pull request please make sure run: warnings seen. package CRAN close submitted CRAN please also run: Also can worth checking spelling urls","code":"devtools::check() rcmdcheck::rcmdcheck(args = c(\"--no-manual\", \"--as-cran\")) devtools::check_win_devel() spelling::spell_check_package() urlchecker::url_check()"},{"path":"/articles/a01_getting-started.html","id":"creating-a-reference-to-the-omop-cdm","dir":"Articles","previous_headings":"","what":"Creating a reference to the OMOP CDM","title":"Getting Started","text":"Typically OMOP CDM datasets stored database can range size hundreds patients thousands records hundreds millions patients billions records. Observational Health Data Science Infromatics (OHDSI) community supports selection popular database platforms including Postgres, Microsoft SQL Server, Oracle, well cloud data platforms suchs Amazon Redshift, Google Big Query, Databricks, Snowflake. first step using CDMConnector create connection database R. can take effort first time set drivers. See “Database Connection Examples” vignette check Posit’s database documentation. example’s use synthetic data Synthea project mapped OMOP CDM format. ’ll use duckdb database file based database similar SQLite better date type support. see example datasets available run example_datasets(). ’re using CDMConnector first time may get message adding enviroment vairable EUNOMIA_DATA_FOLDER . simply create new text file home directory called .Renviron add line EUNOMIA_DATA_FOLDER=\"path//folder///can/store/example/data\". run usethis::edit_r_environ() file created opened opened RStudio. connecting database containing data mapped OMOP CDM, use cdm_from_con create CDM reference. CDM reference single object contains dplyr table references CDM table along metadata CDM instance. cdm_schema schema database contains OMOP CDM tables required. arguments optional. Individual CDM table references can accessed using `$`. can use dplyr query cdm tables just R dataframe. difference data stays database SQL code dynamically generated set database backend. goal allow users think much database SQL instead use familiar R syntax work large tables. collect bring data database R. careful request gigantic result set! general better aggregate data database, possible, bringing data R.","code":"library(CDMConnector) example_datasets() #>  [1] \"GiBleed\"                             \"synthea-allergies-10k\"               #>  [3] \"synthea-anemia-10k\"                  \"synthea-breast_cancer-10k\"           #>  [5] \"synthea-contraceptives-10k\"          \"synthea-covid19-10k\"                 #>  [7] \"synthea-covid19-200k\"                \"synthea-dermatitis-10k\"              #>  [9] \"synthea-heart-10k\"                   \"synthea-hiv-10k\"                     #> [11] \"synthea-lung_cancer-10k\"             \"synthea-medications-10k\"             #> [13] \"synthea-metabolic_syndrome-10k\"      \"synthea-opioid_addiction-10k\"        #> [15] \"synthea-rheumatoid_arthritis-10k\"    \"synthea-snf-10k\"                     #> [17] \"synthea-surgery-10k\"                 \"synthea-total_joint_replacement-10k\" #> [19] \"synthea-veteran_prostate_cancer-10k\" \"synthea-veterans-10k\"                #> [21] \"synthea-weight_loss-10k\"  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir(\"GiBleed\")) DBI::dbListTables(con) #>  [1] \"care_site\"             \"cdm_source\"            \"concept\"               #>  [4] \"concept_ancestor\"      \"concept_class\"         \"concept_relationship\"  #>  [7] \"concept_synonym\"       \"condition_era\"         \"condition_occurrence\"  #> [10] \"cost\"                  \"death\"                 \"device_exposure\"       #> [13] \"domain\"                \"dose_era\"              \"drug_era\"              #> [16] \"drug_exposure\"         \"drug_strength\"         \"fact_relationship\"     #> [19] \"location\"              \"measurement\"           \"metadata\"              #> [22] \"note\"                  \"note_nlp\"              \"observation\"           #> [25] \"observation_period\"    \"payer_plan_period\"     \"person\"                #> [28] \"procedure_occurrence\"  \"provider\"              \"relationship\"          #> [31] \"source_to_concept_map\" \"specimen\"              \"visit_detail\"          #> [34] \"visit_occurrence\"      \"vocabulary\" cdm <- cdm_from_con(con, cdm_schema = \"main\") cdm #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength cdm$observation_period #> # Source:   table<observation_period> [?? x 5] #> # Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpiiD1GO/file12226ed2e1f6.duckdb] #>    observation_period_id person_id observation_period_s…¹ observation_period_e…² #>                    <int>     <int> <date>                 <date>                 #>  1                     6         6 1963-12-31             2007-02-06             #>  2                    13        13 2009-04-26             2019-04-14             #>  3                    27        27 2002-01-30             2018-11-21             #>  4                    16        16 1971-10-14             2017-11-02             #>  5                    55        55 2009-05-30             2019-03-23             #>  6                    60        60 1990-11-21             2019-01-23             #>  7                    42        42 1909-11-03             2019-03-13             #>  8                    33        33 1986-05-12             2018-09-10             #>  9                    18        18 1965-11-17             2018-11-07             #> 10                    25        25 2007-03-18             2019-04-07             #> # ℹ more rows #> # ℹ abbreviated names: ¹​observation_period_start_date, #> #   ²​observation_period_end_date #> # ℹ 1 more variable: period_type_concept_id <int> cdm$person %>%    dplyr::glimpse() #> Rows: ?? #> Columns: 18 #> Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpiiD1GO/file12226ed2e1f6.duckdb] #> $ person_id                   <int> 6, 123, 129, 16, 65, 74, 42, 187, 18, 111,… #> $ gender_concept_id           <int> 8532, 8507, 8507, 8532, 8532, 8532, 8532, … #> $ year_of_birth               <int> 1963, 1950, 1974, 1971, 1967, 1972, 1909, … #> $ month_of_birth              <int> 12, 4, 10, 10, 3, 1, 11, 7, 11, 5, 8, 3, 3… #> $ day_of_birth                <int> 31, 12, 7, 13, 31, 5, 2, 23, 17, 2, 19, 13… #> $ birth_datetime              <dttm> 1963-12-31, 1950-04-12, 1974-10-07, 1971-… #> $ race_concept_id             <int> 8516, 8527, 8527, 8527, 8516, 8527, 8527, … #> $ ethnicity_concept_id        <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ location_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ provider_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ care_site_id                <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ person_source_value         <chr> \"001f4a87-70d0-435c-a4b9-1425f6928d33\", \"0… #> $ gender_source_value         <chr> \"F\", \"M\", \"M\", \"F\", \"F\", \"F\", \"F\", \"M\", \"F… #> $ gender_source_concept_id    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ race_source_value           <chr> \"black\", \"white\", \"white\", \"white\", \"black… #> $ race_source_concept_id      <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … #> $ ethnicity_source_value      <chr> \"west_indian\", \"italian\", \"polish\", \"ameri… #> $ ethnicity_source_concept_id <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, … library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(ggplot2)  cdm$person %>%    group_by(year_of_birth, gender_concept_id) %>%    summarize(n = n(), .groups = \"drop\") %>%    collect() %>%    mutate(sex = case_when(     gender_concept_id == 8532 ~ \"Female\",     gender_concept_id == 8507 ~ \"Male\"   )) %>%    ggplot(aes(y = n, x = year_of_birth, fill = sex)) +   geom_histogram(stat = \"identity\", position = \"dodge\") +   labs(x = \"Year of birth\",         y = \"Person count\",         title = \"Age Distribution\",        subtitle = cdm_name(cdm),        fill = NULL) +   theme_bw()"},{"path":"/articles/a01_getting-started.html","id":"joining-tables","dir":"Articles","previous_headings":"","what":"Joining tables","title":"Getting Started","text":"Since OMOP CDM relational data model joins common analytic code. events OMOP CDM recorded using integers representing standard “concepts”. see text description concept researchers need join clinical tables concept vocabulary table. Every OMOP CDM copy vocabulary used map data OMOP CDM format. example query looking common conditions CDM. Let’s look common drugs used patients “Acute viral pharyngitis”. inspect generated SQL use show_query dplyr. simple queries. complex queries can built combining simple queries like ones analytic packages provide functions implement common analytic use cases. example “cohort definition” set criteria persons must satisfy can quite complex. “Working Cohorts” vignette describes creating using cohorts CDMConnector.","code":"cdm$condition_occurrence %>%    count(condition_concept_id, sort = T) %>%    left_join(cdm$concept, by = c(\"condition_concept_id\" = \"concept_id\")) %>%    collect() %>%    select(\"condition_concept_id\", \"concept_name\", \"n\")  #> # A tibble: 80 × 3 #>    condition_concept_id concept_name                                 n #>                   <int> <chr>                                    <dbl> #>  1              4112343 Acute viral pharyngitis                  10217 #>  2               192671 Gastrointestinal hemorrhage                479 #>  3                28060 Streptococcal sore throat                 2656 #>  4               378001 Concussion with no loss of consciousness  1013 #>  5               257012 Chronic sinusitis                          825 #>  6              4134304 Fracture subluxation of wrist              493 #>  7             40481087 Viral sinusitis                          17268 #>  8               372328 Otitis media                              3605 #>  9               260139 Acute bronchitis                          8184 #> 10                78272 Sprain of wrist                            770 #> # ℹ 70 more rows cdm$condition_occurrence %>%    filter(condition_concept_id == 4112343) %>%    distinct(person_id) %>%    inner_join(cdm$drug_exposure, by = \"person_id\") %>%    count(drug_concept_id, sort = TRUE) %>%    left_join(cdm$concept, by = c(\"drug_concept_id\" = \"concept_id\")) %>%    collect() %>%    select(\"concept_name\", \"n\")  #> # A tibble: 113 × 2 #>    concept_name                                                                n #>    <chr>                                                                   <dbl> #>  1 poliovirus vaccine, inactivated                                          7654 #>  2 zoster vaccine, live                                                     2082 #>  3 celecoxib                                                                1788 #>  4 Aspirin 81 MG Oral Tablet                                                4305 #>  5 hepatitis A vaccine, adult dosage                                        3090 #>  6 Acetaminophen 325 MG Oral Tablet                                         9125 #>  7 Acetaminophen 21.7 MG/ML / Dextromethorphan Hydrobromide 1 MG/ML / dox…  1934 #>  8 Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet                      3738 #>  9 Penicillin V Potassium 500 MG Oral Tablet                                1060 #> 10 Phenazopyridine hydrochloride 100 MG Oral Tablet                          779 #> # ℹ 103 more rows cdm$condition_occurrence %>%    filter(condition_concept_id == 4112343) %>%    distinct(person_id) %>%    inner_join(cdm$drug_exposure, by = \"person_id\") %>%    count(drug_concept_id, sort = TRUE) %>%    left_join(cdm$concept, by = c(\"drug_concept_id\" = \"concept_id\")) %>%    show_query()  #> <SQL> #> SELECT #>   LHS.*, #>   concept_name, #>   domain_id, #>   vocabulary_id, #>   concept_class_id, #>   standard_concept, #>   concept_code, #>   valid_start_date, #>   valid_end_date, #>   invalid_reason #> FROM ( #>   SELECT drug_concept_id, COUNT(*) AS n #>   FROM ( #>     SELECT #>       LHS.person_id AS person_id, #>       drug_exposure_id, #>       drug_concept_id, #>       drug_exposure_start_date, #>       drug_exposure_start_datetime, #>       drug_exposure_end_date, #>       drug_exposure_end_datetime, #>       verbatim_end_date, #>       drug_type_concept_id, #>       stop_reason, #>       refills, #>       quantity, #>       days_supply, #>       sig, #>       route_concept_id, #>       lot_number, #>       provider_id, #>       visit_occurrence_id, #>       visit_detail_id, #>       drug_source_value, #>       drug_source_concept_id, #>       route_source_value, #>       dose_unit_source_value #>     FROM ( #>       SELECT DISTINCT person_id #>       FROM main.condition_occurrence #>       WHERE (condition_concept_id = 4112343.0) #>     ) LHS #>     INNER JOIN main.drug_exposure #>       ON (LHS.person_id = drug_exposure.person_id) #>   ) q01 #>   GROUP BY drug_concept_id #> ) LHS #> LEFT JOIN main.concept #>   ON (LHS.drug_concept_id = concept.concept_id)"},{"path":"/articles/a01_getting-started.html","id":"saving-query-results-to-the-database","dir":"Articles","previous_headings":"","what":"Saving query results to the database","title":"Getting Started","text":"Sometime helpful save query results database instead reading result R. dplyr provides compute function due differences database systems CDMConnector needed export wrapper handles slight differences. CDMConnector’s compute_query function works similarly tested across OHDSI supported database platforms. also options dplyr::compute. writing data CDM database need add one argument creating cdm reference object, “write_schema”. schema database write permissions. Typically separate schema “cdm_schema”. can see query saved new table scratch schema. compute_query returns dplyr reference table.","code":"DBI::dbExecute(con, \"create schema scratch;\") #> [1] 0 cdm <- cdm_from_con(con, cdm_schema = \"main\", write_schema = \"scratch\") drugs <- cdm$condition_occurrence %>%    filter(condition_concept_id == 4112343) %>%    distinct(person_id) %>%    inner_join(cdm$drug_exposure, by = \"person_id\") %>%    count(drug_concept_id, sort = TRUE) %>%    left_join(cdm$concept, by = c(\"drug_concept_id\" = \"concept_id\")) %>%    compute_query(name = \"test\",                 temporary = FALSE,                 schema = \"scratch\",                 overwrite = TRUE)  drugs %>% show_query() #> <SQL> #> SELECT * #> FROM scratch.test  drugs #> # Source:   table<test> [?? x 11] #> # Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpiiD1GO/file12226ed2e1f6.duckdb] #>    drug_concept_id     n concept_name   domain_id vocabulary_id concept_class_id #>              <int> <dbl> <chr>          <chr>     <chr>         <chr>            #>  1        40213160  7654 poliovirus va… Drug      CVX           CVX              #>  2        40213260  2082 zoster vaccin… Drug      CVX           CVX              #>  3         1118084  1788 celecoxib      Drug      RxNorm        Ingredient       #>  4        19059056  4305 Aspirin 81 MG… Drug      RxNorm        Clinical Drug    #>  5        40213296  3090 hepatitis A v… Drug      CVX           CVX              #>  6         1127433  9125 Acetaminophen… Drug      RxNorm        Clinical Drug    #>  7        40229134  1934 Acetaminophen… Drug      RxNorm        Clinical Drug    #>  8         1713671  3738 Amoxicillin 2… Drug      RxNorm        Clinical Drug    #>  9        19133905  1060 Penicillin V … Drug      RxNorm        Clinical Drug    #> 10        40236824   779 Phenazopyridi… Drug      RxNorm        Clinical Drug    #> # ℹ more rows #> # ℹ 5 more variables: standard_concept <chr>, concept_code <chr>, #> #   valid_start_date <date>, valid_end_date <date>, invalid_reason <chr>"},{"path":"/articles/a01_getting-started.html","id":"selecting-a-subset-of-cdm-tables","dir":"Articles","previous_headings":"","what":"Selecting a subset of CDM tables","title":"Getting Started","text":"need references tables can easily select subset tables include CDM reference. cdm_select_tbl function supports tidyselect selection language provides new selection helper: tbl_group. Predefined sets tables can also selected using tbl_group supports several subsets CDM: “”, “clinical”, “vocab”, “derived”, “default”. default set CDM tables included CDM object :","code":"cdm_from_con(con, cdm_schema = \"main\") %>% cdm_select_tbl(\"person\", \"observation_period\") # quoted names #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period cdm_from_con(con, cdm_schema = \"main\") %>% cdm_select_tbl(person, observation_period) # unquoted names  #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period cdm_from_con(con, cdm_schema = \"main\") %>% cdm_select_tbl(starts_with(\"concept\")) # tables that start with 'concept' #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: concept, concept_class, concept_relationship, concept_synonym, concept_ancestor cdm_from_con(con, cdm_schema = \"main\") %>% cdm_select_tbl(contains(\"era\")) # tables that contain the substring 'era' #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: drug_era, dose_era, condition_era cdm_from_con(con, cdm_schema = \"main\") %>% cdm_select_tbl(matches(\"person|period\")) # regular expression #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, payer_plan_period # pre-defined groups cdm_from_con(con, \"main\") %>% cdm_select_tbl(tbl_group(\"clinical\"))  #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship cdm_from_con(con, \"main\") %>% cdm_select_tbl(tbl_group(\"vocab\"))  #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength tbl_group(\"default\") #>  [1] \"person\"               \"observation_period\"   \"visit_occurrence\"     #>  [4] \"condition_occurrence\" \"drug_exposure\"        \"procedure_occurrence\" #>  [7] \"measurement\"          \"observation\"          \"death\"                #> [10] \"location\"             \"care_site\"            \"provider\"             #> [13] \"drug_era\"             \"dose_era\"             \"condition_era\"        #> [16] \"cdm_source\"           \"concept\"              \"vocabulary\"           #> [19] \"concept_relationship\" \"concept_synonym\"      \"concept_ancestor\"     #> [22] \"drug_strength\""},{"path":"/articles/a01_getting-started.html","id":"subsetting-a-cdm","dir":"Articles","previous_headings":"","what":"Subsetting a CDM","title":"Getting Started","text":"Sometimes helpful subset CDM specific set persons simply sample data reasonable size. Let’s subset cdm just persons Pneumonia (concept_id 255848). works best number persons subset quite small database indexes “person_id” columns table. Alternatively simply want random sample entire CDM can use cdm_sample.","code":"person_ids <- cdm$condition_occurrence %>%    filter(condition_concept_id == 255848) %>%    distinct(person_id) %>%    pull(person_id)  length(person_ids) #> [1] 52  cdm_pneumonia <- cdm %>%   cdm_subset(person_id = person_ids)  tally(cdm_pneumonia$person) %>%    pull(n) #> [1] 52  cdm_pneumonia$condition_occurrence %>%    distinct(person_id) %>%    tally() %>%    pull(n) #> [1] 52 cdm_100person <- cdm_sample(cdm, n = 100)  tally(cdm_100person$person) %>% pull(\"n\") #> [1] 100"},{"path":"/articles/a01_getting-started.html","id":"flatten-a-cdm","dir":"Articles","previous_headings":"","what":"Flatten a CDM","title":"Getting Started","text":"OMOP CDM relational data model. Sometimes helpful flatten relational structure “tidy” dataframe one row per observation. transformation done small number persons events.","code":"cdm_flatten(cdm_pneumonia,             domain = c(\"condition\", \"drug\", \"measurement\")) %>%    collect() #> # A tibble: 3,892 × 8 #>    person_id observation_concept_id start_date end_date   type_concept_id domain #>        <int>                  <int> <date>     <date>               <int> <chr>  #>  1      3516                3006322 2008-08-15 2008-08-15            5001 measu… #>  2      2333                3006322 1945-01-18 1945-01-18            5001 measu… #>  3      3516                3006322 1993-09-09 1993-09-09            5001 measu… #>  4      2333                3006322 1921-12-27 1921-12-27            5001 measu… #>  5      3516                3006322 1957-09-25 1957-09-25            5001 measu… #>  6      2333                3006322 1966-02-24 1966-02-24            5001 measu… #>  7      1162               40758406 1963-01-19 1963-01-19            5001 measu… #>  8      3516                3006322 1946-06-25 1946-06-25            5001 measu… #>  9      2333               40758406 1921-07-01 1921-07-01            5001 measu… #> 10      3516                3006322 1979-04-13 1979-04-13            5001 measu… #> # ℹ 3,882 more rows #> # ℹ 2 more variables: observation_concept_name <chr>, type_concept_name <chr>"},{"path":"/articles/a01_getting-started.html","id":"saving-a-local-copy-of-a-cdm","dir":"Articles","previous_headings":"Flatten a CDM","what":"Saving a local copy of a CDM","title":"Getting Started","text":"can use collect bring whole cdm object R dataframes. like save subset CDM restore R local CDM object, CDMConnector provides stow cdm_from_files functions . Restore saved cdm object files cdm_from_files.","code":"local_cdm <- cdm_100person %>%    collect()  # The cdm tables are now dataframes local_cdm$person[1:4, 1:4]  #> # A tibble: 4 × 4 #>   person_id gender_concept_id year_of_birth month_of_birth #>       <int>             <int>         <int>          <int> #> 1       180              8532          1977              4 #> 2        43              8532          1956             12 #> 3       341              8532          1960              7 #> 4       273              8507          1975              9 save_path <- file.path(tempdir(), \"tmp\") dir.create(save_path)  cdm %>%    stow(path = save_path, format = \"parquet\")  list.files(save_path) cdm <- cdm_from_files(save_path, cdm_name = \"GI Bleed example data\")"},{"path":"/articles/a01_getting-started.html","id":"closing-connections","dir":"Articles","previous_headings":"Flatten a CDM","what":"Closing connections","title":"Getting Started","text":"Close database connection dbDisconnect. connection closed cdm objects created connection can longer used.","code":"DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"/articles/a01_getting-started.html","id":"summary","dir":"Articles","previous_headings":"Flatten a CDM","what":"Summary","title":"Getting Started","text":"CDMConnector provides interface working observational health data OMOP CDM format R. Check vignettes details package.","code":""},{"path":"/articles/a02_working_with_cohorts.html","id":"cohort-generation","dir":"Articles","previous_headings":"","what":"Cohort Generation","title":"Working with cohorts","text":"\\(n*4\\) cohort table created process cohort generation. generate cohort specific CDM dataset means combine cohort definition CDM produce cohort table. standardization provided OMOP CDM allows researchers generate cohort definition OMOP CDM dataset. cohort definition expression rules goverining inclusion/exclusion person-days cohort. three common ways create cohort definitions OMOP CDM. Atlas cohort builder Capr R package Custom SQL /R code Atlas web application provides graphical user interface creating cohort definitions. . get started Atlas check free course Ehden Academy demo https://atlas-demo.ohdsi.org/. Capr R package provides code-based interface creating cohort definitions. options available Capr exactly match options available Atlas resulting cohort tables identical. times customization needed possible use bespoke SQL dplyr code build cohort. CDMConnector provides generate_concept_cohort_set function quickly building simple cohorts can starting point subsetting. Atlas cohorts represented using json text files. “generate” one Atlas cohorts cdm object use read_cohort_set function first read folder Atlas cohort json files R. create cohort table generate_cohort_set. can optional csv file called “CohortsToCreate.csv” folder specifies cohort IDs names use. file doesn’t exist IDs assigned automatically using alphabetical order filenames.","code":"path_to_cohort_json_files <- system.file(\"cohorts1\", package = \"CDMConnector\") list.files(path_to_cohort_json_files)  readr::read_csv(file.path(path_to_cohort_json_files, \"CohortsToCreate.csv\"),                 show_col_types = FALSE)"},{"path":"/articles/a02_working_with_cohorts.html","id":"atlas-cohort-definitions","dir":"Articles","previous_headings":"Cohort Generation","what":"Atlas cohort definitions","title":"Working with cohorts","text":"First need create CDM object. Note need specify write_schema creating object. Cohort tables go CDM’s write_schema. generated cohort associated metadata tables. Note cohort table still database can quite large. can also join CDM table subset entire cdm just persons cohort.","code":"library(CDMConnector) path_to_cohort_json_files <- system.file(\"example_cohorts\",                                           package = \"CDMConnector\") list.files(path_to_cohort_json_files)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir(\"GiBleed\")) cdm <- cdm_from_con(con, cdm_schema = \"main\", write_schema = \"main\")  cohort_set <- read_cohort_set(path_to_cohort_json_files)  cohort_set  cdm <- generate_cohort_set(cdm,                             cohort_set,                            name = \"study_cohorts\")  cdm$study_cohorts cohort_count(cdm$study_cohorts) cohort_attrition(cdm$study_cohorts) cohort_set(cdm$study_cohorts) cdm_gibleed <- cdm %>%    cdm_subset_cohort(cohort_table = \"study_cohorts\")"},{"path":"/articles/a02_working_with_cohorts.html","id":"capr-cohort-definitions","dir":"Articles","previous_headings":"Cohort Generation","what":"Capr cohort definitions","title":"Working with cohorts","text":"Capr allows us use R code create cohorts can created Atlas. helpful need create large number similar cohort definitions. create single Cohort definition one inclusion criteria generate_cohort_set accept named list Capr get exact result Capr Atlas definitions equivalent. Learn Capr package website https://ohdsi.github.io/Capr/.","code":"library(Capr)  gibleed_concept_set <- cs(192671, name = \"gibleed\")  gibleed_definition <- cohort(   entry = conditionOccurrence(gibleed_concept_set) )  gibleed_male_definition <- cohort(   entry = conditionOccurrence(gibleed_concept_set, male()) )  # create a named list of Capr cohort definitions cohort_set = list(gibleed = gibleed_definition,                   gibleed_male = gibleed_male_definition)  # generate cohorts cdm <- generate_cohort_set(   cdm,   cohort_set = cohort_set,   name = \"gibleed\" # name for the cohort table in the cdm )  cdm$gibleed"},{"path":"/articles/a02_working_with_cohorts.html","id":"custom-cohort-creation","dir":"Articles","previous_headings":"Cohort Generation","what":"Custom Cohort Creation","title":"Working with cohorts","text":"Sometimes may want create cohorts easily expressed using Atlas Capr. situations can create implement cohort creation using SQL R. See chapter Book OHDSI details using SQL create cohorts. CDMConnector provides helper function build simple cohorts list OMOP concepts. generate_concept_cohort_set accepts named list concept sets create cohorts based concept sets. function allow inclusion/exclusion criteria initial definition, additional criteria can applied “manually” initial generation. example built cohort table concept set. cohort essentially captures patient-time based presence absence OMOP standard concept IDs. manually applied inclusion criteria recorded new attrition record cohort. learn approach building cohorts check PatientProfiles R package. can also create generated cohort set using method choose. long table CDM database four required columns can added CDM object generated cohort set. Suppose example cohort table First make sure table database create dplyr table reference add CDM object. make true generated cohort object use new_generated_cohort_set can see cohort now class “GeneratedCohortSet” well various metadata tables. like override attribute tables pass additional dataframes new_generated_cohort_set. Cohort building fundamental building block observational health analysis CDMConnector supports different ways creating cohorts. long cohort table required structure columns can add cdm new_generated_cohort_set function use downstream OHDSI analytic packages.","code":"library(dplyr, warn.conflicts = FALSE)  cdm <- generate_concept_cohort_set(   cdm,    concept_set = list(gibleed = 192671),    name = \"gibleed2\", # name of the cohort table   limit = \"all\", # use all occurrences of the concept instead of just the first   end = 10 # set explicit cohort end date 10 days after start )  cdm$gibleed2 <- cdm$gibleed2 %>%    semi_join(     filter(cdm$person, gender_concept_id == 8507),      by = c(\"subject_id\" = \"person_id\")   ) %>%    record_cohort_attrition(reason = \"Male\")    cohort_attrition(cdm$gibleed2) cohort <- dplyr::tibble(   cohort_definition_id = 1L,   subject_id = 1L,   cohort_start_date = as.Date(\"1999-01-01\"),   cohort_end_date = as.Date(\"2001-01-01\") )  cohort DBI::dbWriteTable(con, inSchema(\"main\", \"cohort\", dbms = dbms(con)), value = cohort, overwrite = TRUE)  cdm$cohort <- tbl(con, inSchema(\"main\", \"cohort\", dbms = dbms(con))) cdm$cohort <- new_generated_cohort_set(cdm$cohort) class(cdm$cohort) cohort_count(cdm$cohort) cohort_set(cdm$cohort) cohort_attrition(cdm$cohort) DBI::dbWriteTable(con, inSchema(\"main\", \"cohort2\", dbms = dbms(con)), value = cohort)  cdm$cohort2 <- tbl(con, inSchema(\"main\", \"cohort2\", dbms = dbms(con)))   cohort_set <- data.frame(cohort_definition_id = 1L,                          cohort_name = \"made up cohort\")  cdm$cohort2 <- new_generated_cohort_set(cdm$cohort2,                                         cohort_set_ref = cohort_set)  cohort_set(cdm$cohort2) DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"/articles/a03_dbplyr.html","id":"set-up","dir":"Articles","previous_headings":"","what":"Set up","title":"CDMConnector and dbplyr","text":"First let’s load required packages code vignette. haven’t already installed , packages can installed using ´install.packages()´","code":"library(CDMConnector) library(dplyr, warn.conflicts = FALSE) library(ggplot2)"},{"path":"/articles/a03_dbplyr.html","id":"creating-the-cdm-reference","dir":"Articles","previous_headings":"","what":"Creating the cdm reference","title":"CDMConnector and dbplyr","text":"Now let´s connect duckdb database Eunomia data (https://github.com/OHDSI/Eunomia). cdm object now ´ll use going forward. provides reference OMOP CDM tables. can see tables still database, now reference ones might want use analysis. example, person table can referenced like ","code":"con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = \"main\") cdm #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength"},{"path":"/articles/a03_dbplyr.html","id":"putting-it-all-together","dir":"Articles","previous_headings":"","what":"Putting it all together","title":"CDMConnector and dbplyr","text":"Say want make histogram year birth person table. can select variable, bring memory, use ggplot make histogram.  wanted make boxplot length observation periods computation database side, bring new variable memory, use ggplot produce boxplot","code":"cdm$person %>%   select(year_of_birth) %>%   collect() %>%   ggplot(aes(x = year_of_birth)) +   geom_histogram(bins = 30) cdm$observation_period %>%   select(observation_period_start_date, observation_period_end_date) %>%   mutate(observation_period = (observation_period_end_date - observation_period_start_date)/365, 25) %>%   select(observation_period) %>%   collect() %>%   ggplot(aes(x = observation_period)) +   geom_boxplot()"},{"path":"/articles/a03_dbplyr.html","id":"behind-the-scenes","dir":"Articles","previous_headings":"","what":"Behind the scenes","title":"CDMConnector and dbplyr","text":"use show_query check sql run duckdb","code":"cdm$person %>%   tally() %>%   show_query() #> <SQL> #> SELECT COUNT(*) AS n #> FROM main.person cdm$person %>%   summarise(median(year_of_birth))%>%   show_query() #> Warning: Missing values are always removed in SQL aggregation functions. #> Use `na.rm = TRUE` to silence this warning #> This warning is displayed once every 8 hours. #> <SQL> #> SELECT PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY year_of_birth) AS \"median(year_of_birth)\" #> FROM main.person cdm$person %>%   mutate(gender = case_when(     gender_concept_id == \"8507\" ~ \"Male\",     gender_concept_id == \"8532\" ~ \"Female\",     TRUE ~ NA_character_))%>%   show_query() #> <SQL> #> SELECT #>   person.*, #>   CASE #> WHEN (gender_concept_id = '8507') THEN 'Male' #> WHEN (gender_concept_id = '8532') THEN 'Female' #> ELSE NULL #> END AS gender #> FROM main.person DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"/articles/a04_DBI_connection_examples.html","id":"postgres","dir":"Articles","previous_headings":"","what":"Postgres","title":"DBI connection examples","text":"","code":"con <- DBI::dbConnect(RPostgres::Postgres(),                       dbname = Sys.getenv(\"CDM5_POSTGRESQL_DBNAME\"),                       host = Sys.getenv(\"CDM5_POSTGRESQL_HOST\"),                       user = Sys.getenv(\"CDM5_POSTGRESQL_USER\"),                       password = Sys.getenv(\"CDM5_POSTGRESQL_PASSWORD\"))  cdm <- cdm_from_con(con, cdm_schema = Sys.getenv(\"CDM5_POSTGRESQL_CDM_SCHEMA\")) DBI::dbDisconnect(con)"},{"path":"/articles/a04_DBI_connection_examples.html","id":"sql-server","dir":"Articles","previous_headings":"","what":"SQL Server","title":"DBI connection examples","text":"Using odbc SQL Server requires driver setup described .","code":"con <- DBI::dbConnect(odbc::odbc(),                       Driver   = \"ODBC Driver 18 for SQL Server\",                       Server   = Sys.getenv(\"CDM5_SQL_SERVER_SERVER\"),                       Database = Sys.getenv(\"CDM5_SQL_SERVER_CDM_DATABASE\"),                       UID      = Sys.getenv(\"CDM5_SQL_SERVER_USER\"),                       PWD      = Sys.getenv(\"CDM5_SQL_SERVER_PASSWORD\"),                       TrustServerCertificate=\"yes\",                       Port     = 1433)  cdm <- cdm_from_con(con, cdm_schema = c(\"CDMV5\", \"dbo\")) DBI::dbDisconnect(con)"},{"path":"/articles/a04_DBI_connection_examples.html","id":"redshift","dir":"Articles","previous_headings":"","what":"Redshift","title":"DBI connection examples","text":"Redshift almost identical Postgres.","code":"con <- DBI::dbConnect(RPostgres::Redshift(),                       dbname   = Sys.getenv(\"CDM5_REDSHIFT_DBNAME\"),                       host     = Sys.getenv(\"CDM5_REDSHIFT_HOST\"),                       port     = Sys.getenv(\"CDM5_REDSHIFT_PORT\"),                       user     = Sys.getenv(\"CDM5_REDSHIFT_USER\"),                       password = Sys.getenv(\"CDM5_REDSHIFT_PASSWORD\"))  cdm <- cdm_from_con(con, cdm_schema = Sys.getenv(\"CDM5_REDSHIFT_CDM_SCHEMA\")) DBI::dbDisconnect(con)"},{"path":"/articles/a04_DBI_connection_examples.html","id":"oracle","dir":"Articles","previous_headings":"","what":"Oracle","title":"DBI connection examples","text":"First install Oracle Instant Client odbc driver system following instructions .","code":"# odbc::odbcListDrivers() # view all installed odbc drivers con <- DBI::dbConnect(odbc::odbc(), \"OracleODBC-19\") cdm <- cdm_from_con(con, cdm_schema = \"CDMV5\") DBI::dbDisconnect(con)"},{"path":"/articles/a05_cdm_reference_backends.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"CDM reference backends","text":"CDMConnector package allows us work cdm data different locations consistently. cdm_reference may tables database, files disk, tables loaded R. allows computation take place wherever convenient. schematic CDMConnector can used create cdm_references different locations.","code":""},{"path":"/articles/a05_cdm_reference_backends.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"CDM reference backends","text":"show can work (slightly overcomplicate things show different options), let´s say want create histogram age patients diagnosis tear meniscus knee (concept_id “4035415”). can start database , loading required packages, subset person table people include people condition_occurrence table condition_concept_id “4035415” can save tables file now can create cdm_reference files create age diagnosis variable can bring result R make histogram","code":"library(CDMConnector) library(dplyr, warn.conflicts = FALSE) library(ggplot2) con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = \"main\")  # first filter to only those with condition_concept_id \"4035415\" cdm$condition_occurrence %>% tally()  cdm$condition_occurrence <- cdm$condition_occurrence %>%   filter(condition_concept_id == \"4035415\") %>%   select(person_id, condition_start_date)  cdm$condition_occurrence %>% tally()  # then left_join person table cdm$person %>% tally() cdm$person <- cdm$condition_occurrence %>%   select(person_id) %>%   left_join(select(cdm$person, person_id, year_of_birth), by = \"person_id\")  cdm$person %>% tally() dOut <- tempfile() dir.create(dOut) CDMConnector::stow(cdm, dOut, format = \"parquet\") cdm_arrow <- cdm_from_files(dOut, as_data_frame = FALSE, cdm_name = \"GiBleed\")  cdm_arrow$person %>%   nrow()  cdm_arrow$condition_occurrence %>%   nrow() cdm_arrow$result <- cdm_arrow$person %>%   left_join(cdm_arrow$condition_occurrence, by = \"person_id\") %>%   mutate(age_diag = year(condition_start_date) - year_of_birth) result <- cdm_arrow$result %>%   collect()  str(result)  result %>%   ggplot(aes(age_diag)) +   geom_histogram() DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"/articles/a06_using_cdm_attributes.html","id":"set-up","dir":"Articles","previous_headings":"","what":"Set up","title":"Using CDM attributes","text":"Let’s load required packages connect Eunomia dataset duckdb.","code":"library(CDMConnector) library(dplyr)  write_schema <- \"main\" cdm_schema <- \"main\"  con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = cdm_schema, write_schema = write_schema)"},{"path":"/articles/a06_using_cdm_attributes.html","id":"cdm-reference-attributes","dir":"Articles","previous_headings":"","what":"CDM reference attributes","title":"Using CDM attributes","text":"cdm reference various attributes associated . can useful programming developing analytic packages top CDMConnector.","code":""},{"path":"/articles/a06_using_cdm_attributes.html","id":"cdm-name","dir":"Articles","previous_headings":"CDM reference attributes","what":"CDM name","title":"Using CDM attributes","text":"’s requirement every cdm reference name associated . particularly useful network studies can associate results particular cdm. can access attribute like regularly used, make getting cdm name even easier, can also use cdmName (’s snake case equivalent cdm_name)","code":"attr(cdm, \"cdm_name\") #> [1] \"Synthea synthetic health database\" cdmName(cdm) #> [1] \"Synthea synthetic health database\" cdm_name(cdm) #> [1] \"Synthea synthetic health database\""},{"path":"/articles/a06_using_cdm_attributes.html","id":"cdm-version","dir":"Articles","previous_headings":"CDM reference attributes","what":"CDM version","title":"Using CDM attributes","text":"OMOP CDM various versions. also attribute giving version cdm connected .","code":"attr(cdm, \"cdm_version\") #> [1] \"5.3\""},{"path":"/articles/a06_using_cdm_attributes.html","id":"database-connection","dir":"Articles","previous_headings":"CDM reference attributes","what":"Database connection","title":"Using CDM attributes","text":"also attribute identifying database connection underlying cdm reference. can useful, example, want make use DBI functions work database. example use dbListTables list names remote tables accessible connection, dbListFields list field names specific remote table, dbGetQuery returns result query","code":"attr(cdm, \"dbcon\") #> <duckdb_connection d6080 driver=<duckdb_driver 43a00 dbdir='/var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpbSYELG/file128e50fa65b1.duckdb' read_only=FALSE bigint=numeric>> DBI::dbListTables(attr(cdm, \"dbcon\")) #>  [1] \"care_site\"             \"cdm_source\"            \"concept\"               #>  [4] \"concept_ancestor\"      \"concept_class\"         \"concept_relationship\"  #>  [7] \"concept_synonym\"       \"condition_era\"         \"condition_occurrence\"  #> [10] \"cost\"                  \"death\"                 \"device_exposure\"       #> [13] \"domain\"                \"dose_era\"              \"drug_era\"              #> [16] \"drug_exposure\"         \"drug_strength\"         \"fact_relationship\"     #> [19] \"location\"              \"measurement\"           \"metadata\"              #> [22] \"note\"                  \"note_nlp\"              \"observation\"           #> [25] \"observation_period\"    \"payer_plan_period\"     \"person\"                #> [28] \"procedure_occurrence\"  \"provider\"              \"relationship\"          #> [31] \"source_to_concept_map\" \"specimen\"              \"visit_detail\"          #> [34] \"visit_occurrence\"      \"vocabulary\" DBI::dbListFields(attr(cdm, \"dbcon\"), \"person\") #>  [1] \"person_id\"                   \"gender_concept_id\"           #>  [3] \"year_of_birth\"               \"month_of_birth\"              #>  [5] \"day_of_birth\"                \"birth_datetime\"              #>  [7] \"race_concept_id\"             \"ethnicity_concept_id\"        #>  [9] \"location_id\"                 \"provider_id\"                 #> [11] \"care_site_id\"                \"person_source_value\"         #> [13] \"gender_source_value\"         \"gender_source_concept_id\"    #> [15] \"race_source_value\"           \"race_source_concept_id\"      #> [17] \"ethnicity_source_value\"      \"ethnicity_source_concept_id\" DBI::dbGetQuery(attr(cdm, \"dbcon\"), \"SELECT * FROM person LIMIT 5\") #>   person_id gender_concept_id year_of_birth month_of_birth day_of_birth #> 1         6              8532          1963             12           31 #> 2       123              8507          1950              4           12 #> 3       129              8507          1974             10            7 #> 4        16              8532          1971             10           13 #> 5        65              8532          1967              3           31 #>   birth_datetime race_concept_id ethnicity_concept_id location_id provider_id #> 1     1963-12-31            8516                    0          NA          NA #> 2     1950-04-12            8527                    0          NA          NA #> 3     1974-10-07            8527                    0          NA          NA #> 4     1971-10-13            8527                    0          NA          NA #> 5     1967-03-31            8516                    0          NA          NA #>   care_site_id                  person_source_value gender_source_value #> 1           NA 001f4a87-70d0-435c-a4b9-1425f6928d33                   F #> 2           NA 052d9254-80e8-428f-b8b6-69518b0ef3f3                   M #> 3           NA 054d32d5-904f-4df4-846b-8c08d165b4e9                   M #> 4           NA 00444703-f2c9-45c9-a247-f6317a43a929                   F #> 5           NA 02a3dad9-f9d5-42fb-8074-c16d45b4f5c8                   F #>   gender_source_concept_id race_source_value race_source_concept_id #> 1                        0             black                      0 #> 2                        0             white                      0 #> 3                        0             white                      0 #> 4                        0             white                      0 #> 5                        0             black                      0 #>   ethnicity_source_value ethnicity_source_concept_id #> 1            west_indian                           0 #> 2                italian                           0 #> 3                 polish                           0 #> 4               american                           0 #> 5              dominican                           0"},{"path":[]},{"path":"/articles/a06_using_cdm_attributes.html","id":"generated-cohort-set","dir":"Articles","previous_headings":"Cohort attributes","what":"Generated cohort set","title":"Using CDM attributes","text":"generate cohort addition cohort table also various attributes can useful subsequent analysis. create cohort table single cohort. cohort set attribute gives details settings associated cohorts (along utility functions make easier access attribute). cohort_count attribute counts cohorts. also attribute, cohort attrition, summary attrition creating cohorts. addition, also cdm reference attribute cohorts. particularly useful developing analytic packages top CDMConnector.","code":"# debugonce(generateConceptCohortSet) cdm <- generateConceptCohortSet(cdm = cdm,                                  conceptSet = list(\"gi_bleed\" = 192671,                                                   \"celecoxib\" = 1118084),                                  name = \"study_cohorts\",                                 overwrite = TRUE)  cdm$study_cohorts %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpbSYELG/file128e50fa65b1.duckdb] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <int> 260, 549, 787, 795, 962, 1076, 1099, 1112, 1158, … #> $ cohort_start_date    <date> 2010-04-04, 1987-12-28, 2017-04-02, 1982-09-03, … #> $ cohort_end_date      <date> 2017-08-05, 2018-10-04, 2019-05-28, 2018-12-17, … attr(cdm$study_cohorts, \"cohort_set\") #> # Source:   table<study_cohorts_set> [2 x 6] #> # Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpbSYELG/file128e50fa65b1.duckdb] #>   cohort_definition_id cohort_name limit prior_observation future_observation #>                  <int> <chr>       <chr>             <dbl>              <dbl> #> 1                    2 celecoxib   first                 0                  0 #> 2                    1 gi_bleed    first                 0                  0 #> # ℹ 1 more variable: end <chr> cohortSet(cdm$study_cohorts) cohort_set(cdm$study_cohorts) attr(cdm$study_cohorts, \"cohort_count\") #> # Source:   table<study_cohorts_count> [2 x 3] #> # Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpbSYELG/file128e50fa65b1.duckdb] #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1            479             479 #> 2                    2           1800            1800 cohortCount(cdm$study_cohorts) cohort_count(cdm$study_cohorts) attr(cdm$study_cohorts, \"cohort_attrition\") cohortAttrition(cdm$study_cohorts) cohort_attrition(cdm$study_cohorts) attr(cdm$study_cohorts, \"cdm_reference\") #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength, study_cohorts"},{"path":"/articles/a06_using_cdm_attributes.html","id":"creating-a-bespoke-cohort","dir":"Articles","previous_headings":"Cohort attributes","what":"Creating a bespoke cohort","title":"Using CDM attributes","text":"Say create custom GI bleed cohort standard cohort structure can add required attributes using newGeneratedCohortSet function. minimum requirement also define cohort set associate set custom cohorts. Now custom cohort GI_bleed attributes associated created generateConceptCohortSet. mean can used analytic packages designed work cdm cohorts.","code":"cdm$GI_bleed <- cdm$condition_occurrence %>%    filter(condition_concept_id == 192671) %>%    mutate(cohort_definition_id = 1) %>%    select(cohort_definition_id, person_id,          condition_start_date, condition_end_date) %>%    rename(\"subject_id\" = \"person_id\",           \"cohort_start_date\" = \"condition_start_date\",           \"cohort_end_date\" = \"condition_end_date\") %>%    compute_query(temporary = FALSE,                 schema = write_schema,                 overwrite = TRUE)  cdm$GI_bleed %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.8.1 [root@Darwin 23.0.0:R 4.3.1//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpbSYELG/file128e50fa65b1.duckdb] #> $ cohort_definition_id <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <int> 273, 61, 351, 579, 549, 116, 163, 304, 326, 285, … #> $ cohort_start_date    <date> 2011-10-10, 2005-09-15, 2018-06-28, 1999-11-06, … #> $ cohort_end_date      <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … GI_bleed_cohort_ref <- data.frame(cohort_definition_id = 1,                                   cohort_name = \"custom_gi_bleed\")  cdm$GI_bleed <- newGeneratedCohortSet(cohortRef = cdm$GI_bleed,                                        cohortSetRef = GI_bleed_cohort_ref,                                        overwrite = TRUE) cohort_set(cdm$GI_bleed) #> # A tibble: 1 × 2 #>   cohort_definition_id cohort_name     #>                  <dbl> <chr>           #> 1                    1 custom_gi_bleed cohort_count(cdm$GI_bleed) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <dbl>          <dbl>           <dbl> #> 1                    1            479             479 cohort_attrition(cdm$GI_bleed) #> # A tibble: 1 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <dbl>          <dbl>           <dbl>     <dbl> <chr>            #> 1                    1            479             479         1 Qualifying init… #> # ℹ 2 more variables: excluded_records <dbl>, excluded_subjects <dbl> attr(cdm$GI_bleed, \"cdm_reference\") #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength, study_cohorts, GI_bleed"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Adam Black. Author, maintainer. Artem Gorbachev. Author. Edward Burn. Author. Marti Catala Sabate. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Black , Gorbachev , Burn E, Catala Sabate M (2023). CDMConnector: Connect OMOP Common Data Model. https://darwin-eu.github.io/CDMConnector/, https://github.com/darwin-eu/CDMConnector.","code":"@Manual{,   title = {CDMConnector: Connect to an OMOP Common Data Model},   author = {Adam Black and Artem Gorbachev and Edward Burn and Marti {Catala Sabate}},   year = {2023},   note = {https://darwin-eu.github.io/CDMConnector/, https://github.com/darwin-eu/CDMConnector}, }"},{"path":"/index.html","id":"cdmconnector","dir":"","previous_headings":"","what":"Connect to an OMOP Common Data Model","title":"Connect to an OMOP Common Data Model","text":"using tidyverse OMOP Common Data Model? Interact CDM pipe-friendly way CDMConnector. Quickly connect CDM start exploring. Build data analysis pipelines using familiar dplyr verbs. Easily extract subsets CDM data database.","code":""},{"path":"/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Connect to an OMOP Common Data Model","text":"CDMConnector introduces single R object represents OMOP CDM relational database inspired dm, DatabaseConnector, Andromeda packages. cdm object can used dplyr style data analysis pipelines facilitates interactive data exploration. cdm objects encapsulate references OMOP CDM tables remote RDBMS well metadata necessary interacting CDM.","code":""},{"path":"/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"Connect to an OMOP Common Data Model","text":"CDMConnector meant entry point composable tidyverse style data analysis operations OMOP CDM. cdm_reference object behaves like named list tables. Quickly create list references subset CDM tables Store connection information later use inside functions Use DBI driver back-end OMOP CDM See Getting started details.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Connect to an OMOP Common Data Model","text":"CDMConnector can installed CRAN: development version can installed GitHub:","code":"install.packages(\"CDMConnector\") # install.packages(\"devtools\") devtools::install_github(\"darwin-eu/CDMConnector\")"},{"path":"/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Connect to an OMOP Common Data Model","text":"Create cdm_reference object DBI connection. Use `cdm_schema argument point particular schema database. cdm_reference named list table references: Use dplyr verbs table references. Compose operations pipe. Run simple quality check cdm.","code":"library(CDMConnector)  con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = \"main\") cdm  ## # OMOP CDM reference (tbl_duckdb_connection) ##  ## Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, metadata, cdm_source, concept, vocabulary, domain, concept_class, concept_relationship, relationship, concept_synonym, concept_ancestor, source_to_concept_map, drug_strength library(dplyr, warn.conflicts = FALSE) names(cdm)  ##  [1] \"person\"                \"observation_period\"    \"visit_occurrence\"      ##  [4] \"visit_detail\"          \"condition_occurrence\"  \"drug_exposure\"         ##  [7] \"procedure_occurrence\"  \"device_exposure\"       \"measurement\"           ## [10] \"observation\"           \"death\"                 \"note\"                  ## [13] \"note_nlp\"              \"specimen\"              \"fact_relationship\"     ## [16] \"location\"              \"care_site\"             \"provider\"              ## [19] \"payer_plan_period\"     \"cost\"                  \"drug_era\"              ## [22] \"dose_era\"              \"condition_era\"         \"metadata\"              ## [25] \"cdm_source\"            \"concept\"               \"vocabulary\"            ## [28] \"domain\"                \"concept_class\"         \"concept_relationship\"  ## [31] \"relationship\"          \"concept_synonym\"       \"concept_ancestor\"      ## [34] \"source_to_concept_map\" \"drug_strength\" tally(cdm$person)  ## # Source:   SQL [1 x 1] ## # Database: DuckDB 0.8.0 [root@Darwin 21.6.0:R 4.2.2//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpGP4CIq/xpjlsqnl] ##       n ##   <dbl> ## 1  2694 cdm$condition_era %>%   left_join(cdm$concept, by = c(\"condition_concept_id\" = \"concept_id\")) %>%    count(top_conditions = concept_name, sort = TRUE)  ## # Source:     SQL [?? x 2] ## # Database:   DuckDB 0.8.0 [root@Darwin 21.6.0:R 4.2.2//var/folders/xx/01v98b6546ldnm1rg1_bvk000000gn/T//RtmpGP4CIq/xpjlsqnl] ## # Ordered by: desc(n) ##    top_conditions                               n ##    <chr>                                    <dbl> ##  1 Viral sinusitis                          17268 ##  2 Acute viral pharyngitis                  10217 ##  3 Acute bronchitis                          8184 ##  4 Otitis media                              3561 ##  5 Osteoarthritis                            2694 ##  6 Streptococcal sore throat                 2656 ##  7 Sprain of ankle                           1915 ##  8 Concussion with no loss of consciousness  1013 ##  9 Sinusitis                                 1001 ## 10 Acute bacterial sinusitis                  939 ## # ℹ more rows cdm <- cdm_from_con(con, cdm_schema = \"main\") validate_cdm(cdm)  ## ── CDM v5.3 validation (checking 35 tables) ──────────────────────────────────── ## visit_detail table expected columns[8:19] vs visit_detail table actual_colums[8:19] ##   \"visit_detail_type_concept_id\" ##   \"provider_id\" ##   \"care_site_id\" ## - \"visit_detail_source_value\" ## + \"admitting_source_concept_id\" ## - \"visit_detail_source_concept_id\" ## + \"discharge_to_concept_id\" ## - \"admitting_source_value\" ## + \"preceding_visit_detail_id\" ## - \"admitting_source_concept_id\" ## + \"visit_detail_source_value\" ## - \"discharge_to_source_value\" ## + \"visit_detail_source_concept_id\" ## - \"discharge_to_concept_id\" ## + \"admitting_source_value\" ## - \"preceding_visit_detail_id\" ## + \"discharge_to_source_value\" ## and 2 more ... ## condition_occurrence table expected columns[6:16] vs condition_occurrence table actual_colums[6:16] ##   \"condition_end_date\" ##   \"condition_end_datetime\" ##   \"condition_type_concept_id\" ## - \"condition_status_concept_id\" ## + \"stop_reason\" ## - \"stop_reason\" ## + \"provider_id\" ## - \"provider_id\" ## + \"visit_occurrence_id\" ## - \"visit_occurrence_id\" ## + \"visit_detail_id\" ## - \"visit_detail_id\" ## + \"condition_source_value\" ## - \"condition_source_value\" ## + \"condition_source_concept_id\" ## - \"condition_source_concept_id\" ## + \"condition_status_source_value\" ## and 1 more ... ##     note_nlp table expected columns | note_nlp table actual_colums     ## [2] \"note_id\"                       | \"note_id\"                    [2] ## [3] \"section_concept_id\"            | \"section_concept_id\"         [3] ## [4] \"snippet\"                       | \"snippet\"                    [4] ## [5] \"\\\"offset\\\"\"                    - \"offset\"                     [5] ## [6] \"lexical_variant\"               | \"lexical_variant\"            [6] ## [7] \"note_nlp_concept_id\"           | \"note_nlp_concept_id\"        [7] ## [8] \"note_nlp_source_concept_id\"    | \"note_nlp_source_concept_id\" [8] ##      cost table expected columns | cost table actual_colums        ## [17] \"payer_plan_period_id\"      | \"payer_plan_period_id\"     [17] ## [18] \"amount_allowed\"            | \"amount_allowed\"           [18] ## [19] \"revenue_code_concept_id\"   | \"revenue_code_concept_id\"  [19] ## [20] \"revenue_code_source_value\" - \"reveue_code_source_value\" [20] ## [21] \"drg_concept_id\"            | \"drg_concept_id\"           [21] ## [22] \"drg_source_value\"          | \"drg_source_value\"         [22] ## • 17 empty CDM tables: visit_detail, device_exposure, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, dose_era, metadata, concept_class, source_to_concept_map, drug_strength"},{"path":"/index.html","id":"dbi-drivers","dir":"","previous_headings":"","what":"DBI Drivers","title":"Connect to an OMOP Common Data Model","text":"CDMConnector tested using following DBI driver backends: RPostgres Postgres Redshift odbc Microsoft SQL Server, Oracle, Databricks/Spark duckdb","code":""},{"path":"/index.html","id":"getting-help","dir":"","previous_headings":"","what":"Getting help","title":"Connect to an OMOP Common Data Model","text":"encounter clear bug, please file issue minimal reproducible example GitHub. License: Apache 2.0","code":""},{"path":"/reference/CDMConnector-package.html","id":null,"dir":"Reference","previous_headings":"","what":"CDMConnector: Connect to an OMOP Common Data Model — CDMConnector-package","title":"CDMConnector: Connect to an OMOP Common Data Model — CDMConnector-package","text":"Provides tools working observational health data Observational Medical Outcomes Partnership (OMOP) Common Data Model format pipe friendly syntax. Common data model database table references stored single compound object along metadata.","code":""},{"path":[]},{"path":"/reference/CDMConnector-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"CDMConnector: Connect to an OMOP Common Data Model — CDMConnector-package","text":"Maintainer: Adam Black black@ohdsi.org (ORCID) Authors: Artem Gorbachev artem.gorbachev@odysseusinc.com Edward Burn edward.burn@ndorms.ox.ac.uk Marti Catala Sabate marti.catalasabate@ndorms.ox.ac.uk","code":""},{"path":"/reference/appendPermanent.html","id":null,"dir":"Reference","previous_headings":"","what":"Run a dplyr query and add the result set to an existing — appendPermanent","title":"Run a dplyr query and add the result set to an existing — appendPermanent","text":"Run dplyr query add result set existing","code":""},{"path":"/reference/appendPermanent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run a dplyr query and add the result set to an existing — appendPermanent","text":"","code":"appendPermanent(x, name, schema = NULL)  append_permanent(x, name, schema = NULL)"},{"path":"/reference/appendPermanent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run a dplyr query and add the result set to an existing — appendPermanent","text":"x dplyr query name Name table appended. already exist created. schema Schema table exists. Can length 1 2 vector. (e.g. schema = \"my_schema\", schema = c(\"my_schema\", \"dbo\"))","code":""},{"path":"/reference/appendPermanent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run a dplyr query and add the result set to an existing — appendPermanent","text":"dplyr reference newly created table","code":""},{"path":"/reference/appendPermanent.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run a dplyr query and add the result set to an existing — appendPermanent","text":"","code":"if (FALSE) { library(CDMConnector)  con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) concept <- dplyr::tbl(con, \"concept\")  # create a table rxnorm_count <- concept %>%   dplyr::filter(domain_id == \"Drug\") %>%   dplyr::mutate(isRxnorm = (vocabulary_id == \"RxNorm\")) %>%   dplyr::count(domain_id, isRxnorm) %>%   computeQuery(\"rxnorm_count\")  # append to an existing table rxnorm_count <- concept %>%   dplyr::filter(domain_id == \"Procedure\") %>%   dplyr::mutate(isRxnorm = (vocabulary_id == \"RxNorm\")) %>%   dplyr::count(domain_id, isRxnorm) %>%   appendPermanent(\"rxnorm_count\")  DBI::dbDisconnect(con, shutdown = TRUE)  }"},{"path":"/reference/asDate.html","id":null,"dir":"Reference","previous_headings":"","what":"as.Date dbplyr translation wrapper — asDate","title":"as.Date dbplyr translation wrapper — asDate","text":"workaround using .Date inside dplyr verbs database backend. function used inside dplyr verbs first argument database table reference. asDate must unquoted !! inside dplyr verbs (see example).","code":""},{"path":"/reference/asDate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"as.Date dbplyr translation wrapper — asDate","text":"","code":"asDate(x)  as_date(x)"},{"path":"/reference/asDate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"as.Date dbplyr translation wrapper — asDate","text":"x R expression","code":""},{"path":"/reference/asDate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"as.Date dbplyr translation wrapper — asDate","text":"","code":"if (FALSE) { con <- DBI::dbConnect(odbc::odbc(), \"Oracle\") date_tbl <- dplyr::copy_to(con,                            data.frame(y = 2000L, m = 10L, d = 10L),                            name = \"tmp\",                            temporary = TRUE)  df <- date_tbl %>%   dplyr::mutate(date_from_parts = !!asDate(paste0(     .data$y, \"/\",     .data$m, \"/\",     .data$d   ))) %>%   collect() }"},{"path":"/reference/assert_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"Assert that tables exist in a cdm object — assert_tables","title":"Assert that tables exist in a cdm object — assert_tables","text":"cdm object list references subset tables OMOP Common Data Model. write function accepts cdm object parameter assert_tables/assertTables help check tables need cdm object, correct columns/fields, (optionally) empty.","code":""},{"path":"/reference/assert_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assert that tables exist in a cdm object — assert_tables","text":"","code":"assert_tables(cdm, tables, empty.ok = FALSE, add = NULL)  assertTables(cdm, tables, empty.ok = FALSE, add = NULL)"},{"path":"/reference/assert_tables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assert that tables exist in a cdm object — assert_tables","text":"cdm cdm object tables character vector table names check. empty.ok empty table (0 rows) considered error? TRUE FALSE (default) add optional AssertCollection created checkmate::makeAssertCollection() errors added .","code":""},{"path":"/reference/assert_tables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assert that tables exist in a cdm object — assert_tables","text":"Invisibly returns cdm object","code":""},{"path":"/reference/assert_tables.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assert that tables exist in a cdm object — assert_tables","text":"","code":"if (FALSE) { # Use assertTables inside a function to check that tables exist countDrugsByGender <- function(cdm) {   assertTables(cdm, tables = c(\"person\", \"drug_era\"), empty.ok = FALSE)    cdm$person %>%     dplyr::inner_join(cdm$drug_era, by = \"person_id\") %>%     dplyr::count(.data$gender_concept_id, .data$drug_concept_id) %>%     dplyr::collect() }  library(CDMConnector) con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con)  countDrugsByGender(cdm)  DBI::dbDisconnect(con, shutdown = TRUE)  }"},{"path":"/reference/assert_write_schema.html","id":null,"dir":"Reference","previous_headings":"","what":"Assert that cdm has a writable schema — assert_write_schema","title":"Assert that cdm has a writable schema — assert_write_schema","text":"cdm object can optionally contain single schema database write access. assert_write_schema checks cdm contains \"write_schema\" attribute tests local dataframes can written tables schema.","code":""},{"path":"/reference/assert_write_schema.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assert that cdm has a writable schema — assert_write_schema","text":"","code":"assert_write_schema(cdm, add = NULL)  assertWriteSchema(cdm, add = NULL)"},{"path":"/reference/assert_write_schema.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assert that cdm has a writable schema — assert_write_schema","text":"cdm cdm object add optional AssertCollection created checkmate::makeAssertCollection() errors added .","code":""},{"path":"/reference/assert_write_schema.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assert that cdm has a writable schema — assert_write_schema","text":"Invisibly returns cdm object","code":""},{"path":"/reference/cash-.cdm_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm reference object — $.cdm_reference","title":"Subset a cdm reference object — $.cdm_reference","text":"Subset cdm reference object","code":""},{"path":"/reference/cash-.cdm_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm reference object — $.cdm_reference","text":"","code":"# S3 method for cdm_reference $(x, name)"},{"path":"/reference/cash-.cdm_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm reference object — $.cdm_reference","text":"x cdm reference name name table extract cdm object","code":""},{"path":"/reference/cash-.cdm_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm reference object — $.cdm_reference","text":"single cdm table reference","code":""},{"path":"/reference/cdmDisconnect.html","id":null,"dir":"Reference","previous_headings":"","what":"Disconnect the connection of the cdm object — cdmDisconnect","title":"Disconnect the connection of the cdm object — cdmDisconnect","text":"Disconnect connection cdm object","code":""},{"path":"/reference/cdmDisconnect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Disconnect the connection of the cdm object — cdmDisconnect","text":"","code":"cdmDisconnect(cdm)  cdm_disconnect(cdm)"},{"path":"/reference/cdmDisconnect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Disconnect the connection of the cdm object — cdmDisconnect","text":"cdm cdm reference","code":""},{"path":"/reference/cdmFlatten.html","id":null,"dir":"Reference","previous_headings":"","what":"Flatten a cdm into a single observation table — cdmFlatten","title":"Flatten a cdm into a single observation table — cdmFlatten","text":"experimental function transforms OMOP CDM single observation table. recommended use filtered CDM cdm small size.","code":""},{"path":"/reference/cdmFlatten.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flatten a cdm into a single observation table — cdmFlatten","text":"","code":"cdmFlatten(   cdm,   domain = c(\"condition\", \"drug\", \"procedure\"),   includeConceptName = TRUE )  cdm_flatten(   cdm,   domain = c(\"condition\", \"drug\", \"procedure\"),   include_concept_name = TRUE )"},{"path":"/reference/cdmFlatten.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flatten a cdm into a single observation table — cdmFlatten","text":"cdm cdm_reference object domain Domains include. Must subset \"condition\", \"drug\", \"procedure\", \"measurement\", \"visit\", \"death\", \"observation\". include_concept_name, includeConceptName concept_name type_concept_name include output table? TRUE (default) FALSE","code":""},{"path":"/reference/cdmFlatten.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flatten a cdm into a single observation table — cdmFlatten","text":"lazy query evaluated result single cdm table","code":""},{"path":[]},{"path":"/reference/cdmFlatten.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flatten a cdm into a single observation table — cdmFlatten","text":"","code":"if (FALSE) { library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- cdm_from_con(con, cdm_schema = \"main\")  all_observations <- cdmSubset(cdm, personId = c(2, 18, 42)) %>%   cdmFlatten() %>%   collect()  all_observations #> # A tibble: 213 × 8 #>    person_id observation_.  start_date end_date   type_.  domain obser.  type_. #>        <dbl>          <dbl> <date>     <date>       <dbl> <chr>  <chr>   <chr> #>  1         2       40213201 1986-09-09 1986-09-09  5.81e5 drug   pneumo  <NA> #>  2        18        4116491 1997-11-09 1998-01-09  3.20e4 condi  Escher  <NA> #>  3        18       40213227 2017-01-04 2017-01-04  5.81e5 drug   tetanu  <NA> #>  4        42        4156265 1974-06-13 1974-06-27  3.20e4 condi  Facial  <NA> #>  5        18       40213160 1966-02-23 1966-02-23  5.81e5 drug   poliov  <NA> #>  6        42        4198190 1933-10-29 1933-10-29  3.80e7 proce  Append  <NA> #>  7         2        4109685 1952-07-13 1952-07-27  3.20e4 condi  Lacera  <NA> #>  8        18       40213260 2017-01-04 2017-01-04  5.81e5 drug   zoster  <NA> #>  9        42        4151422 1985-02-03 1985-02-03  3.80e7 proce  Sputum  <NA> #> 10         2        4163872 1993-03-29 1993-03-29  3.80e7 proce  Plain   <NA> #> # ... with 203 more rows, and abbreviated variable names observation_concept_id, #> #   type_concept_id, observation_concept_name, type_concept_name  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/cdmName.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the CDM name — cdmName","title":"Get the CDM name — cdmName","text":"Extract CDM name attribute cdm_reference object","code":""},{"path":"/reference/cdmName.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the CDM name — cdmName","text":"","code":"cdmName(cdm)  cdm_name(cdm)"},{"path":"/reference/cdmName.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the CDM name — cdmName","text":"cdm cdm object","code":""},{"path":"/reference/cdmName.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the CDM name — cdmName","text":"name CDM character string","code":""},{"path":"/reference/cdmName.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the CDM name — cdmName","text":"","code":"if (FALSE) { library(CDMConnector) con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con, \"main\") cdmName(cdm) #> [1] \"Synthea synthetic health database\"  cdm <- cdm_from_con(con, \"main\", cdm_name = \"Example CDM\") cdmName(cdm) #> [1] \"Example CDM\"  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/cdmSample.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm object to a random sample of individuals — cdmSample","title":"Subset a cdm object to a random sample of individuals — cdmSample","text":"cdmSample takes cdm object returns new cdm includes random sample persons cdm. person_ids person table observation_period table considered.","code":""},{"path":"/reference/cdmSample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm object to a random sample of individuals — cdmSample","text":"","code":"cdmSample(cdm, n)  cdm_sample(cdm, n)"},{"path":"/reference/cdmSample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm object to a random sample of individuals — cdmSample","text":"cdm cdm_reference object n Number persons include cdm","code":""},{"path":"/reference/cdmSample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm object to a random sample of individuals — cdmSample","text":"modified cdm_reference object clinical tables lazy queries pointing subset","code":""},{"path":[]},{"path":"/reference/cdmSample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subset a cdm object to a random sample of individuals — cdmSample","text":"","code":"if (FALSE) { library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- cdm_from_con(con, cdm_schema = \"main\")  cdmSampled <- cdmSample(cdm, n = 2)  cdmSampled$person %>%   select(person_id) #> # Source:   SQL [2 x 1] #> # Database: DuckDB 0.6.1 #>   person_id #>       <dbl> #> 1       155 #> 2      3422  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/cdmSubset.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm object to a set of persons — cdmSubset","title":"Subset a cdm object to a set of persons — cdmSubset","text":"cdmSubset takes cdm object list person IDs input. returns new cdm includes data persons matching provided person IDs. Generated cohorts cdm also subset IDs provided.","code":""},{"path":"/reference/cdmSubset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm object to a set of persons — cdmSubset","text":"","code":"cdmSubset(cdm, personId)  cdm_subset(cdm, person_id)"},{"path":"/reference/cdmSubset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm object to a set of persons — cdmSubset","text":"cdm cdm_reference object person_id, personId numeric vector person IDs include cdm","code":""},{"path":"/reference/cdmSubset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm object to a set of persons — cdmSubset","text":"modified cdm_reference object clinical tables lazy queries pointing subset","code":""},{"path":[]},{"path":"/reference/cdmSubset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subset a cdm object to a set of persons — cdmSubset","text":"","code":"if (FALSE) { library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- cdm_from_con(con, cdm_schema = \"main\")  cdm2 <- cdmSubset(cdm, personId = c(2, 18, 42))  cdm2$person %>%   select(1:3) #> # Source:   SQL [3 x 3] #> # Database: DuckDB 0.6.1 #>   person_id gender_concept_id year_of_birth #>       <dbl>             <dbl>         <dbl> #> 1         2              8532          1920 #> 2        18              8532          1965 #> 3        42              8532          1909  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/cdmSubsetCohort.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","title":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","text":"cdmSubset return new cdm object contains lazy queries pointing cdm tables subset individuals generated cohort. Since cdm tables lazy queries, subset operation done tables used. computeQuery can used run SQL used subset cdm table store new table database.","code":""},{"path":"/reference/cdmSubsetCohort.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","text":"","code":"cdmSubsetCohort(cdm, cohortTable = \"cohort\", cohortId = NULL, verbose = FALSE)  cdm_subset_cohort(   cdm,   cohort_table = \"cohort\",   cohort_id = NULL,   verbose = FALSE )"},{"path":"/reference/cdmSubsetCohort.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","text":"cdm cdm_reference object cohortTable, cohort_table name cohort table cdm reference cohortId, cohort_id IDs cohorts want subset cohort table. NULL (default) cohorts cohort table considered. verbose subset messages printed? TRUE FALSE (default)","code":""},{"path":"/reference/cdmSubsetCohort.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","text":"modified cdm_reference clinical tables subset just persons selected cohorts.","code":""},{"path":[]},{"path":"/reference/cdmSubsetCohort.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subset a cdm to the individuals in one or more cohorts — cdmSubsetCohort","text":"","code":"if (FALSE) { library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- cdm_from_con(con, cdm_schema = \"main\", write_schema = \"main\")  # generate a cohort path <- system.file(\"cohorts2\", mustWork = TRUE, package = \"CDMConnector\")  cohortSet <- readCohortSet(path) %>%   filter(cohort_name == \"GIBleed_male\")  # subset cdm to persons in the generated cohort cdm <- generateCohortSet(cdm, cohortSet = cohortSet, name = \"gibleed\")  cdmGiBleed <- cdmSubsetCohort(cdm, cohortTable = \"gibleed\")  cdmGiBleed$person %>%   tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB 0.6.1 #>       n #>   <dbl> #> 1   237  cdm$person %>%   tally() #> # Source:   SQL [1 x 1] #> # Database: DuckDB 0.6.1 #>       n #>   <dbl> #> 1  2694   DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/cdm_from_con.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a CDM reference object from a database connection — cdm_from_con","title":"Create a CDM reference object from a database connection — cdm_from_con","text":"Create CDM reference object database connection","code":""},{"path":"/reference/cdm_from_con.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a CDM reference object from a database connection — cdm_from_con","text":"","code":"cdm_from_con(   con,   cdm_schema = NULL,   write_schema = NULL,   cohort_tables = NULL,   cdm_version = \"5.3\",   cdm_name = NULL )  cdmFromCon(   con,   cdmSchema = NULL,   writeSchema = NULL,   cohortTables = NULL,   cdmVersion = \"5.3\",   cdmName = NULL )"},{"path":"/reference/cdm_from_con.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a CDM reference object from a database connection — cdm_from_con","text":"con DBI database connection database OMOP CDM v5.4 v5.3 instance located. cdm_schema, cdmSchema schema OMOP CDM tables located. Defaults NULL. write_schema, writeSchema optional schema CDM database user write access . cohort_tables, cohortTables character vector listing cohort table names included CDM object. cdm_version, cdmVersion version OMOP CDM: \"5.3\" (default), \"5.4\", \"auto\". \"auto\" attempts automatically determine cdm version using heuristics. Cohort tables must write_schema. cdm_name, cdmName name CDM. NULL (default) cdm_source_name .  field CDM_SOURCE table used.","code":""},{"path":"/reference/cdm_from_con.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a CDM reference object from a database connection — cdm_from_con","text":"list dplyr database table references pointing CDM tables","code":""},{"path":"/reference/cdm_from_files.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a CDM reference from a folder containing parquet, csv, or feather\nfiles — cdm_from_files","title":"Create a CDM reference from a folder containing parquet, csv, or feather\nfiles — cdm_from_files","text":"Create CDM reference folder containing parquet, csv, feather files","code":""},{"path":"/reference/cdm_from_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a CDM reference from a folder containing parquet, csv, or feather\nfiles — cdm_from_files","text":"","code":"cdm_from_files(   path,   format = \"auto\",   cdm_version = \"5.3\",   cdm_name = NULL,   as_data_frame = TRUE )  cdmFromFiles(   path,   format = \"auto\",   cdmVersion = \"5.3\",   cdmName = NULL,   asDataFrame = TRUE )"},{"path":"/reference/cdm_from_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a CDM reference from a folder containing parquet, csv, or feather\nfiles — cdm_from_files","text":"path folder OMOP CDM v5.4 instance located. format file format read ? Must \"auto\" (default), \"parquet\", \"csv\", \"feather\". cdm_version, cdmVersion version cdm (5.3 5.4) cdm_name, cdmName name use cdm. as_data_frame, asDataFrame TRUE (default) read files R dataframes. FALSE read files R Arrow Datasets.","code":""},{"path":"/reference/cdm_from_files.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a CDM reference from a folder containing parquet, csv, or feather\nfiles — cdm_from_files","text":"list dplyr database table references pointing CDM tables","code":""},{"path":"/reference/cdm_select_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Select a subset of tables in a cdm reference object — cdm_select_tbl","title":"Select a subset of tables in a cdm reference object — cdm_select_tbl","text":"function uses syntax similar dplyr::select can used subset cdm reference object specific tables","code":""},{"path":"/reference/cdm_select_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select a subset of tables in a cdm reference object — cdm_select_tbl","text":"","code":"cdm_select_tbl(cdm, ...)"},{"path":"/reference/cdm_select_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select a subset of tables in a cdm reference object — cdm_select_tbl","text":"cdm cdm reference object created cdm_from_con ... One table names tables cdm object. tidyselect supported, see dplyr::select() details semantics.","code":""},{"path":"/reference/cdm_select_tbl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select a subset of tables in a cdm reference object — cdm_select_tbl","text":"cdm reference object containing selected tables","code":""},{"path":"/reference/cdm_select_tbl.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select a subset of tables in a cdm reference object — cdm_select_tbl","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir())  cdm <- cdm_from_con(con, \"main\")  cdm_select_tbl(cdm, person) cdm_select_tbl(cdm, person, observation_period) cdm_select_tbl(cdm, tbl_group(\"vocab\")) cdm_select_tbl(cdm, \"person\")  DBI::dbDisconnect(con) }"},{"path":"/reference/cohortAttrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Get attrition table from a GeneratedCohortSet object — cohortAttrition","title":"Get attrition table from a GeneratedCohortSet object — cohortAttrition","text":"Get attrition table GeneratedCohortSet object","code":""},{"path":"/reference/cohortAttrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get attrition table from a GeneratedCohortSet object — cohortAttrition","text":"","code":"cohortAttrition(x)  cohort_attrition(x)"},{"path":"/reference/cohortAttrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get attrition table from a GeneratedCohortSet object — cohortAttrition","text":"x generatedCohortSet object","code":""},{"path":"/reference/cohortCount.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cohort counts from a GeneratedCohortSet object — cohortCount","title":"Get cohort counts from a GeneratedCohortSet object — cohortCount","text":"Get cohort counts GeneratedCohortSet object","code":""},{"path":"/reference/cohortCount.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cohort counts from a GeneratedCohortSet object — cohortCount","text":"","code":"cohortCount(x)  cohort_count(x)"},{"path":"/reference/cohortCount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cohort counts from a GeneratedCohortSet object — cohortCount","text":"x generatedCohortSet object","code":""},{"path":"/reference/cohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cohort settings from a GeneratedCohortSet object — cohortSet","title":"Get cohort settings from a GeneratedCohortSet object — cohortSet","text":"Get cohort settings GeneratedCohortSet object","code":""},{"path":"/reference/cohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cohort settings from a GeneratedCohortSet object — cohortSet","text":"","code":"cohortSet(x)  cohort_set(x)"},{"path":"/reference/cohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cohort settings from a GeneratedCohortSet object — cohortSet","text":"x generatedCohortSet object","code":""},{"path":"/reference/cohort_erafy.html","id":null,"dir":"Reference","previous_headings":"","what":"Collapse cohort records within a certain number of days — cohort_erafy","title":"Collapse cohort records within a certain number of days — cohort_erafy","text":"Collapse cohort records within certain number days","code":""},{"path":"/reference/cohort_erafy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collapse cohort records within a certain number of days — cohort_erafy","text":"","code":"cohort_erafy(x, gap)  cohortErafy(x, gap)"},{"path":"/reference/cohort_erafy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collapse cohort records within a certain number of days — cohort_erafy","text":"x generated cohort set gap two cohort records 'gap' days apart less periods collapsed single record","code":""},{"path":"/reference/cohort_erafy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collapse cohort records within a certain number of days — cohort_erafy","text":"lazy query generated cohort set","code":""},{"path":"/reference/cohort_union.html","id":null,"dir":"Reference","previous_headings":"","what":"Union all cohorts in a cohort set with cohorts in a second cohort set — cohort_union","title":"Union all cohorts in a cohort set with cohorts in a second cohort set — cohort_union","text":"Union cohorts cohort set cohorts second cohort set","code":""},{"path":"/reference/cohort_union.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Union all cohorts in a cohort set with cohorts in a second cohort set — cohort_union","text":"","code":"cohort_union(x, y)  cohortUnion(x, y)"},{"path":"/reference/cohort_union.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Union all cohorts in a cohort set with cohorts in a second cohort set — cohort_union","text":"x tbl reference cohort table one generated cohorts y tbl reference cohort table one generated cohort","code":""},{"path":"/reference/cohort_union.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Union all cohorts in a cohort set with cohorts in a second cohort set — cohort_union","text":"lazy query executed resolve new cohort table one cohort_definitions_ids x resulting union cohorts x single cohort y cohort table","code":""},{"path":"/reference/collect.cdm_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Bring a remote CDM reference into R — collect.cdm_reference","title":"Bring a remote CDM reference into R — collect.cdm_reference","text":"function calls collect list lazy queries returns result list dataframes.","code":""},{"path":"/reference/collect.cdm_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bring a remote CDM reference into R — collect.cdm_reference","text":"","code":"# S3 method for cdm_reference collect(x, ...)"},{"path":"/reference/collect.cdm_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bring a remote CDM reference into R — collect.cdm_reference","text":"x cdm_reference object. ... used. Included compatibility.","code":""},{"path":"/reference/collect.cdm_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bring a remote CDM reference into R — collect.cdm_reference","text":"cdm_reference object list R dataframes.","code":""},{"path":"/reference/collect.cdm_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bring a remote CDM reference into R — collect.cdm_reference","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) vocab <- cdm_from_con(con, \"main\") %>%   cdm_select_tbl(\"concept\", \"concept_ancestor\")  local_vocab <- collect(vocab) DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/computeQuery.html","id":null,"dir":"Reference","previous_headings":"","what":"Execute dplyr query and save result in remote database — computeQuery","title":"Execute dplyr query and save result in remote database — computeQuery","text":"function wrapper around dplyr::compute tested several database systems. needed handle edge cases dplyr::compute produce correct SQL.","code":""},{"path":"/reference/computeQuery.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Execute dplyr query and save result in remote database — computeQuery","text":"","code":"computeQuery(   x,   name = uniqueTableName(),   temporary = TRUE,   schema = NULL,   overwrite = FALSE,   ... )  compute_query(   x,   name = uniqueTableName(),   temporary = TRUE,   schema = NULL,   overwrite = FALSE,   ... )"},{"path":"/reference/computeQuery.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Execute dplyr query and save result in remote database — computeQuery","text":"x dplyr query name name table create. temporary table temporary: TRUE (default) FALSE schema schema table created. Ignored temporary = TRUE. overwrite table overwritten already exists: TRUE FALSE (default) Ignored temporary = TRUE. ... arguments passed dplyr::compute","code":""},{"path":"/reference/computeQuery.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Execute dplyr query and save result in remote database — computeQuery","text":"dplyr::tbl() reference newly created table.","code":""},{"path":"/reference/computeQuery.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Execute dplyr query and save result in remote database — computeQuery","text":"","code":"if (FALSE) { library(CDMConnector)  con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, \"main\")  # create a temporary table in the remote database from a dplyr query drugCount <- cdm$concept %>%   dplyr::count(domain_id == \"Drug\") %>%   computeQuery()  # create a permanent table in the remote database from a dplyr query drugCount <- cdm$concept %>%   dplyr::count(domain_id == \"Drug\") %>%   computeQuery(\"tmp_table\", temporary = FALSE, schema = \"main\")  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/copy_cdm_to.html","id":null,"dir":"Reference","previous_headings":"","what":"Copy a cdm object from one database to another — copy_cdm_to","title":"Copy a cdm object from one database to another — copy_cdm_to","text":"may helpful able easily copy small test cdm local database remote testing. copy_cdm_to takes cdm object connection. copies cdm remote database connection. CDM tables can prefixed new database allowing multiple cdms single shared database schema.","code":""},{"path":"/reference/copy_cdm_to.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copy a cdm object from one database to another — copy_cdm_to","text":"","code":"copy_cdm_to(con, cdm, schema, overwrite = FALSE)  copyCdmTo(con, cdm, schema, overwrite = FALSE)"},{"path":"/reference/copy_cdm_to.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copy a cdm object from one database to another — copy_cdm_to","text":"con DBI datbase connection created DBI::dbConnect cdm cdm reference object created CDMConnector::cdmFromCon CDMConnector::cdm_from_con schema schema name remote database user write permission overwrite cohort table overwritten already exists? TRUE FALSE (default)","code":""},{"path":"/reference/copy_cdm_to.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copy a cdm object from one database to another — copy_cdm_to","text":"cdm reference object pointing newly created cdm remote database","code":""},{"path":[]},{"path":"/reference/dateadd.html","id":null,"dir":"Reference","previous_headings":"","what":"Add days or years to a date in a dplyr query — dateadd","title":"Add days or years to a date in a dplyr query — dateadd","text":"function must \"unquoted\" using \"bang bang\" operator (!!). See example.","code":""},{"path":"/reference/dateadd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add days or years to a date in a dplyr query — dateadd","text":"","code":"dateadd(date, number, interval = \"day\")"},{"path":"/reference/dateadd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add days or years to a date in a dplyr query — dateadd","text":"date name date column database table character string number number units add. Can positive negative whole number. interval units add. Must either \"day\" (default) \"year\"","code":""},{"path":"/reference/dateadd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add days or years to a date in a dplyr query — dateadd","text":"Platform specific SQL can used dplyr query.","code":""},{"path":"/reference/dateadd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add days or years to a date in a dplyr query — dateadd","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb()) date_tbl <- dplyr::copy_to(con, data.frame(date1 = as.Date(\"1999-01-01\")),                            name = \"tmpdate\", overwrite = TRUE, temporary = TRUE)  df <- date_tbl %>%   dplyr::mutate(date2 = !!dateadd(\"date1\", 1, interval = \"year\")) %>%   dplyr::collect()  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/datediff.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the difference between two days — datediff","title":"Compute the difference between two days — datediff","text":"function must \"unquoted\" using \"bang bang\" operator (!!). See example.","code":""},{"path":"/reference/datediff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the difference between two days — datediff","text":"","code":"datediff(start, end, interval = \"day\")"},{"path":"/reference/datediff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the difference between two days — datediff","text":"start name start date column database string. end name end date column database string. interval units use difference calculation. Must either \"day\" (default) \"year\".","code":""},{"path":"/reference/datediff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the difference between two days — datediff","text":"Platform specific SQL can used dplyr query.","code":""},{"path":"/reference/datediff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the difference between two days — datediff","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb()) date_tbl <- dplyr::copy_to(con, data.frame(date1 = as.Date(\"1999-01-01\")),                            name = \"tmpdate\", overwrite = TRUE, temporary = TRUE)  df <- date_tbl %>%   dplyr::mutate(date2 = !!dateadd(\"date1\", 1, interval = \"year\")) %>%   dplyr::mutate(dif_years = !!datediff(\"date1\", \"date2\", interval = \"year\")) %>%   dplyr::collect()  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/datepart.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract the day, month or year of a date in a dplyr pipeline — datepart","title":"Extract the day, month or year of a date in a dplyr pipeline — datepart","text":"Extract day, month year date dplyr pipeline","code":""},{"path":"/reference/datepart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract the day, month or year of a date in a dplyr pipeline — datepart","text":"","code":"datepart(date, interval = \"year\", dbms = NULL)"},{"path":"/reference/datepart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract the day, month or year of a date in a dplyr pipeline — datepart","text":"date Character string represents date column. interval Interval extract date. Valid options \"year\", \"month\", \"day\". dbms Database system, NULL auto detected.","code":""},{"path":"/reference/datepart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract the day, month or year of a date in a dplyr pipeline — datepart","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), \":memory:\") date_tbl <- dplyr::copy_to(con,                            data.frame(birth_date = as.Date(\"1993-04-19\")),                            name = \"tmp\",                            temporary = TRUE) df <- date_tbl %>%   dplyr::mutate(year = !!datepart(\"birth_date\", \"year\")) %>%   dplyr::mutate(month = !!datepart(\"birth_date\", \"month\")) %>%   dplyr::mutate(day = !!datepart(\"birth_date\", \"day\")) %>%   dplyr::collect() DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/dbms.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","title":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","text":"Get database management system (dbms) cdm_reference DBI connection","code":""},{"path":"/reference/dbms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","text":"","code":"dbms(con)"},{"path":"/reference/dbms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","text":"con DBI connection cdm_reference","code":""},{"path":"/reference/dbms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","text":"character string representing dbms can used SqlRender","code":""},{"path":"/reference/dbms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the database management system (dbms) from a cdm_reference or DBI\nconnection — dbms","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con) dbms(cdm) dbms(con) }"},{"path":"/reference/downloadEunomiaData.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Eunomia data files — downloadEunomiaData","title":"Download Eunomia data files — downloadEunomiaData","text":"Download Eunomia data files https://github.com/darwin-eu/EunomiaDatasets","code":""},{"path":"/reference/downloadEunomiaData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Eunomia data files — downloadEunomiaData","text":"","code":"downloadEunomiaData(   datasetName = \"GiBleed\",   cdmVersion = \"5.3\",   pathToData = Sys.getenv(\"EUNOMIA_DATA_FOLDER\"),   overwrite = FALSE )  download_eunomia_data(   dataset_name = \"GiBleed\",   cdm_version = \"5.3\",   path_to_data = Sys.getenv(\"EUNOMIA_DATA_FOLDER\"),   overwrite = FALSE )"},{"path":"/reference/downloadEunomiaData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Eunomia data files — downloadEunomiaData","text":"overwrite Control whether existing archive file overwritten already exist. dataset_name, datasetName data set name found https://github.com/darwin-eu/EunomiaDatasets. data set name corresponds folder data set ZIP files cdm_version, cdmVersion OMOP CDM version. version appear suffix data file, example: synpuf_5.3.zip. Default: '5.3' path_to_data, pathToData path Eunomia data stored file system., default value environment variable \"EUNOMIA_DATA_FOLDER\" used.","code":""},{"path":"/reference/downloadEunomiaData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Eunomia data files — downloadEunomiaData","text":"Invisibly returns destination download successful.","code":""},{"path":"/reference/downloadEunomiaData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Eunomia data files — downloadEunomiaData","text":"","code":"if (FALSE) { downloadEunomiaData(\"GiBleed\") }"},{"path":"/reference/dropTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Drop tables from write_schema of a cdm object — dropTable","title":"Drop tables from write_schema of a cdm object — dropTable","text":"cdm objects can zero cohort tables stored special schema user write access. function removes tables cdm's write_schema","code":""},{"path":"/reference/dropTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Drop tables from write_schema of a cdm object — dropTable","text":"","code":"dropTable(cdm, name, verbose = FALSE)  drop_table(cdm, name, verbose = FALSE)"},{"path":"/reference/dropTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Drop tables from write_schema of a cdm object — dropTable","text":"cdm cdm reference name character vector tables cdm's write_schema tidyselect specification tables drop. (e.g. starts_with(\"temp\"), matches(\"study01\"), etc.) verbose Print message dropping table? TRUE FALSE (default)","code":""},{"path":"/reference/dropTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Drop tables from write_schema of a cdm object — dropTable","text":"Returns cdm object selected tables removed","code":""},{"path":"/reference/dropTable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Drop tables from write_schema of a cdm object — dropTable","text":"","code":"if (FALSE) { library(CDMConnector)  con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = \"main\", write_schema = \"main\")  # create two temporary tables in the remote database from a query with a common prefix cdm$tmp_table <- cdm$concept %>%   dplyr::count(domain_id == \"Drug\") %>%   computeQuery(\"tmp_table\", temporary = FALSE, schema = \"main\")  cdm$tmp_table2 <- cdm$concept %>%   dplyr::count(domain_id == \"Condition\") %>%   computeQuery(\"tmp_table2\", temporary = FALSE, schema = \"main\")  stringr::str_subset(DBI::dbListTables(con), \"tmp\") #> [1] \"tmp_table\"  \"tmp_table2\" stringr::str_subset(names(cdm), \"tmp\") #> [1] \"tmp_table\"  \"tmp_table2\"  # drop tables with a common prefix cdm <- dropTable(cdm, name = dplyr::starts_with(\"tmp\"))  stringr::str_subset(DBI::dbListTables(con), \"tmp\") #> character(0) stringr::str_subset(names(cdm), \"tmp\") #> character(0)  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/eunomiaDir.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a copy of an example OMOP CDM dataset — eunomiaDir","title":"Create a copy of an example OMOP CDM dataset — eunomiaDir","text":"Creates copy Eunomia database, returns path new database file. dataset yet exist user's computer attempt download source data path defined EUNOMIA_DATA_FOLDER environment variable.","code":""},{"path":"/reference/eunomiaDir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a copy of an example OMOP CDM dataset — eunomiaDir","text":"","code":"eunomiaDir(   datasetName = \"GiBleed\",   cdmVersion = \"5.3\",   databaseFile = tempfile(fileext = \".duckdb\") )  eunomia_dir(   dataset_name = \"GiBleed\",   cdm_version = \"5.3\",   database_file = tempfile(fileext = \".duckdb\") )"},{"path":"/reference/eunomiaDir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a copy of an example OMOP CDM dataset — eunomiaDir","text":"datasetName, dataset_name One \"GiBleed\" (default), \"synthea-allergies-10k\", \"synthea-anemia-10k\", \"synthea-breast_cancer-10k\", \"synthea-contraceptives-10k\", \"synthea-covid19-10k\", \"synthea-covid19-200k\", \"synthea-dermatitis-10k\", \"synthea-heart-10k\", \"synthea-hiv-10k\", \"synthea-lung_cancer-10k\", \"synthea-medications-10k\", \"synthea-metabolic_syndrome-10k\", \"synthea-opioid_addiction-10k\", \"synthea-rheumatoid_arthritis-10k\", \"synthea-snf-10k\", \"synthea-surgery-10k\", \"synthea-total_joint_replacement-10k\", \"synthea-veteran_prostate_cancer-10k\", \"synthea-veterans-10k\", \"synthea-weight_loss-10k\" cdmVersion, cdm_version OMOP CDM version. Currently \"5.3\" supported. databaseFile, database_file full path new copy example CDM dataset.","code":""},{"path":"/reference/eunomiaDir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a copy of an example OMOP CDM dataset — eunomiaDir","text":"file path new Eunomia dataset copy","code":""},{"path":"/reference/eunomiaDir.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a copy of an example OMOP CDM dataset — eunomiaDir","text":"","code":"if (FALSE) {  con <- DBI::dbConnect(duckdb::duckdb(), eunomiaDir(\"GiBleed\"))  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/eunomia_is_available.html","id":null,"dir":"Reference","previous_headings":"","what":"Has the Eunomia dataset been cached? — eunomia_is_available","title":"Has the Eunomia dataset been cached? — eunomia_is_available","text":"Eunomia dataset cached?","code":""},{"path":"/reference/eunomia_is_available.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Has the Eunomia dataset been cached? — eunomia_is_available","text":"","code":"eunomia_is_available(dataset_name = \"GiBleed\", cdm_version = \"5.3\")  eunomiaIsAvailable(datasetName = \"GiBleed\", cdmVersion = \"5.3\")"},{"path":"/reference/eunomia_is_available.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Has the Eunomia dataset been cached? — eunomia_is_available","text":"dataset_name, datasetName Name Eunomia dataset check. Defaults \"GiBleed\". cdm_version, cdmVersion Version Eunomia dataset check. Must \"5.3\" \"5.4\".","code":""},{"path":"/reference/eunomia_is_available.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Has the Eunomia dataset been cached? — eunomia_is_available","text":"TRUE eunomia example dataset available FASLE otherwise","code":""},{"path":"/reference/exampleDatasets.html","id":null,"dir":"Reference","previous_headings":"","what":"List the available example CDM datasets — exampleDatasets","title":"List the available example CDM datasets — exampleDatasets","text":"List available example CDM datasets","code":""},{"path":"/reference/exampleDatasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List the available example CDM datasets — exampleDatasets","text":"","code":"exampleDatasets()  example_datasets()"},{"path":"/reference/exampleDatasets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List the available example CDM datasets — exampleDatasets","text":"character vector example CDM dataset identifiers","code":""},{"path":"/reference/exampleDatasets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List the available example CDM datasets — exampleDatasets","text":"","code":"if (FALSE) { library(CDMConnector) exampleDatasets()[1] #> [1] \"GiBleed\"  con <- DBI::dbConnect(duckdb::duckdb(), eunomiaDir(\"GiBleed\")) cdm <- cdm_from_con(con) }"},{"path":"/reference/generateCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a cohort set on a cdm object — generateCohortSet","title":"Generate a cohort set on a cdm object — generateCohortSet","text":"\"GeneratedCohortSet\" object consists four components remote table reference OHDSI cohort table least columns: cohort_definition_id, subject_id, cohort_start_date, cohort_end_date. Additional columns optional analytic packages define additional columns specific certain analytic cohorts. settings attribute points remote table containing cohort settings including names cohorts. attrition attribute points remote table attrition information recorded generation. attribute optional. Since calculating attrition takes additional compute can skipped resulting NULL attrition attribute. cohortCounts attribute points remote table containing cohort counts three attributes tidy tables. implementation object experimental user feedback welcome.  One key design principle GeneratedCohortSet objects created can persist across analysis execution modified creation. possible modify GeneratedCohortSet object invalidate attributes may longer accurate.","code":""},{"path":"/reference/generateCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a cohort set on a cdm object — generateCohortSet","text":"","code":"generateCohortSet(   cdm,   cohortSet,   name = \"cohort\",   computeAttrition = TRUE,   overwrite = FALSE )  generate_cohort_set(   cdm,   cohort_set,   name = \"cohort\",   compute_attrition = TRUE,   overwrite = FALSE )"},{"path":"/reference/generateCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a cohort set on a cdm object — generateCohortSet","text":"cdm cdm reference created CDMConnector. write_schema must specified. name Name cohort table created. also used prefix cohort attribute tables. overwrite cohort table overwritten already exists? TRUE FALSE (default) cohort_set, cohortSet Can cohortSet object created readCohortSet(), single Capr cohort definition, named list Capr cohort definitions. compute_attrition, computeAttrition attrition computed? TRUE (default) FALSE","code":""},{"path":"/reference/generateCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a cohort set on a cdm object — generateCohortSet","text":"","code":"if (FALSE) { library(CDMConnector) con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con,                     cdm_schema = \"main\",                     write_schema = \"main\")  cohortSet <- readCohortSet(system.file(\"cohorts2\", package = \"CDMConnector\")) cdm <- generateCohortSet(cdm, cohortSet, name = \"cohort\")  print(cdm$cohort)  cohortAttrition(cdm$cohort) cohortSet(cdm$cohort) cohortCount(cdm$cohort) }"},{"path":"/reference/generateConceptCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new generated cohort set from a list of concept sets — generateConceptCohortSet","title":"Create a new generated cohort set from a list of concept sets — generateConceptCohortSet","text":"Generate new cohort set one concept sets. concept set result one cohort represent time concept observed subject/person. Concept sets can passed function : named list numeric vectors, one vector per concept set named list Capr concept sets Clinical observation records looked respective domain tables using vocabulary CDM. required domain table exist cdm object warning given. Concepts vocabulary data silently ignored. end dates missing exist, case procedure observation domains, start date used end date.","code":""},{"path":"/reference/generateConceptCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new generated cohort set from a list of concept sets — generateConceptCohortSet","text":"","code":"generateConceptCohortSet(   cdm,   conceptSet = NULL,   name = \"cohort\",   limit = \"first\",   requiredObservation = c(0, 0),   end = \"observation_period_end_date\",   overwrite = FALSE )  generate_concept_cohort_set(   cdm,   concept_set = NULL,   name = \"cohort\",   limit = \"first\",   required_observation = c(0, 0),   end = \"observation_period_end_date\",   overwrite = FALSE )"},{"path":"/reference/generateConceptCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new generated cohort set from a list of concept sets — generateConceptCohortSet","text":"cdm cdm reference object created CDMConnector::cdmFromCon CDMConnector::cdm_from_con conceptSet, concept_set named list numeric vectors Capr concept sets name name new generated cohort table character string limit Include \"first\" (default) \"\" occurrences events cohort \"first\" include first occurrence event concept set cohort. \"\" include occurrences events defined concept set cohort. requiredObservation, required_observation numeric vector length 2 specifies number days required observation time prior index post index event included cohort. end cohort_end_date defined? \"observation_period_end_date\" (default): earliest observation_period_end_date event start date numeric scalar: fixed number days event start date \"event_end_date\": event end date. event end date populated event start date used overwrite cohort table overwritten already exists? TRUE FALSE (default)","code":""},{"path":"/reference/generateConceptCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new generated cohort set from a list of concept sets — generateConceptCohortSet","text":"cdm reference object new generated cohort set table added","code":""},{"path":"/reference/inSchema.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for working with compound schemas — inSchema","title":"Helper for working with compound schemas — inSchema","text":"similar dbplyr::in_schema tested across multiple database platforms. exists work around limitations dbplyr::in_schema.","code":""},{"path":"/reference/inSchema.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper for working with compound schemas — inSchema","text":"","code":"inSchema(schema, table, dbms = NULL)  in_schema(schema, table, dbms = NULL)"},{"path":"/reference/inSchema.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for working with compound schemas — inSchema","text":"schema schema name character string table table name character string dbms name database management system returned dbms(connection)","code":""},{"path":"/reference/inSchema.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper for working with compound schemas — inSchema","text":"DBI::Id represents qualified table schema","code":""},{"path":"/reference/intersect_cohorts.html","id":null,"dir":"Reference","previous_headings":"","what":"Intersect all cohorts in a single cohort table — intersect_cohorts","title":"Intersect all cohorts in a single cohort table — intersect_cohorts","text":"Intersect cohorts single cohort table","code":""},{"path":"/reference/intersect_cohorts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Intersect all cohorts in a single cohort table — intersect_cohorts","text":"","code":"intersect_cohorts(x, cohort_definition_id = 1L)  intersectCohorts(x, cohort_definition_id = 1L)"},{"path":"/reference/intersect_cohorts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Intersect all cohorts in a single cohort table — intersect_cohorts","text":"x tbl reference cohort table cohort_definition_id number use new cohort_definition_id","code":""},{"path":"/reference/intersect_cohorts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Intersect all cohorts in a single cohort table — intersect_cohorts","text":"lazy query executed resolve new cohort table one cohort_definition_id resulting intersection cohorts original cohort table","code":""},{"path":"/reference/list_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"List tables in a schema — list_tables","title":"List tables in a schema — list_tables","text":"DBI::dbListTables can used get tables database always specific schema. listTables list tables schema.","code":""},{"path":"/reference/list_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List tables in a schema — list_tables","text":"","code":"list_tables(con, schema = NULL)  listTables(con, schema = NULL)"},{"path":"/reference/list_tables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List tables in a schema — list_tables","text":"con DBI connection database schema name schema database. NULL, returns DBI::dbListTables(con).","code":""},{"path":"/reference/list_tables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List tables in a schema — list_tables","text":"character vector table names","code":""},{"path":"/reference/list_tables.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List tables in a schema — list_tables","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) listTables(con, schema = \"main\") }"},{"path":"/reference/new_generated_cohort_set.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"constructor function used analytic package developers create generatedCohortSet objects.","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"","code":"new_generated_cohort_set(   cohort_ref,   cohort_set_ref = NULL,   cohort_attrition_ref = NULL,   cohort_count_ref = NULL,   overwrite = FALSE )  newGeneratedCohortSet(   cohortRef,   cohortSetRef = NULL,   cohortAttritionRef = NULL,   cohortCountRef = NULL,   overwrite = FALSE )"},{"path":"/reference/new_generated_cohort_set.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"cohort_ref, cohortRef tbl_sql object points remote cohort table following first four columns: cohort_definition_id, subject_id, cohort_start_date, cohort_end_date. Additional columns optional. cohort_set_ref, cohortSetRef tbl_sql object points remote table following first two columns: cohort_definition_id, cohort_name. Additional columns optional. cohort_definition_id primary key table uniquely identify rows. cohort_attrition_ref, cohortAttritionRef tbl_sql object points attrition table remote database first column cohort_definition_id. cohort_count_ref, cohortCountRef tbl_sql object points cohort_count table remote database columns cohort_definition_id, cohort_entries, cohort_subjects. overwrite tables overwritten already exist? TRUE FALSE (default)","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"generatedCohortSet object tbl_sql reference cohort table write_schema OMOP CDM","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"generatedCohort set person-time OMOP CDM database. generatedCohort can represented table three columns: subject_id, cohort_start_date, cohort_end_date. Subject_id person_id OMOP CDM. generatedCohortSet collection one generatedCohorts can represented table four columns: cohort_definition_id, subject_id, cohort_start_date, cohort_end_date. constructor function defines generatedCohortSet object R. object extension tbl_sql object defined dplyr. lazy database query points cohort table database least columns cohort_definition_id, subject_id, cohort_start_date, cohort_end_date. table optionally columns well. addition generatedCohortSet object three optional attributes. : cohort_set, cohort_attrition, cohort_count. attributes also lazy SQL query (tbl_sql) points table database described .","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"cohort-set","dir":"Reference","previous_headings":"","what":"cohort_set","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"cohort_set table one row per cohort_definition_id. first two columns cohort_set table : cohort_definition_id, cohort_name. Additional columns can added. cohort_set table meant store metadata cohort definition. Since table required created supplied.","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"cohort-attrition","dir":"Reference","previous_headings":"","what":"cohort_attrition","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"cohort_attrition optional table stores attrition information recorded cohort generation process many persons dropped step inclusion rule application. first column table cohort_definition_id columns currently constraints.","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"cohort-count","dir":"Reference","previous_headings":"","what":"cohort_count","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"cohort_count option attribute table records number records number unique persons cohort generatedCohortSet. derived metadata can re-derived long cohort_set, complete list cohorts set, available. Column names cohort_count : cohort_definition_id, number_records, number_subjects. table required generatedCohortSet objects created supplied.","code":""},{"path":"/reference/new_generated_cohort_set.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Constructor for GeneratedCohortSet objects — new_generated_cohort_set","text":"","code":"if (FALSE) {  # This function is for developers who are creating generatedCohortSet  # objects in their packages. The function should accept a cdm_reference  # object as the first argument and return a cdm_reference object with the  # cohort table added. The second argument should be `name` which will be  # the prefix for the database tables, the name of the cohort table in the  # database and the name of the cohort table in the cdm object.  # Other optional arguments can be added after the first two.   generateCustomCohort <- function(cdm, name, ...) {     # accept a cdm_reference object as input    checkmate::assertClass(cdm, \"cdm_reference\")    con <- attr(cdm, \"dbcon\")     # Create the tables in the database however you like    # All the tables should be prefixed with `name`    # The cohort table should be called `name` in the database     # Create the dplyr table references    cohort_ref <- dplyr::tbl(con, name)    cohort_set <- dplyr::tbl(con, paste0(name, \"_set\"))    cohort_attrition_ref <- dplyr::tbl(con, paste0(name, \"_attrition\"))    cohort_count_ref <- dplyr::tbl(con, paste0(name, \"_count\"))     # add to the cdm    cdm[[name]] <- cohort_ref     # create the generated cohort set object using the constructor    cdm[[name]] <- new_generated_cohort_set(       cdm[[name]],       cohort_set_ref = cohort_set_ref,       cohort_attrition_ref = cohort_attrition_ref,       cohort_count_ref = cohort_count_ref)     return(cdm)  } }"},{"path":"/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"Pipe operator","code":""},{"path":"/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"/reference/print.cdm_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Print a CDM reference object — print.cdm_reference","title":"Print a CDM reference object — print.cdm_reference","text":"Print CDM reference object","code":""},{"path":"/reference/print.cdm_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print a CDM reference object — print.cdm_reference","text":"","code":"# S3 method for cdm_reference print(x, ...)"},{"path":"/reference/print.cdm_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print a CDM reference object — print.cdm_reference","text":"x cdm_reference object ... Included compatibility generic. used.","code":""},{"path":"/reference/print.cdm_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print a CDM reference object — print.cdm_reference","text":"Invisibly returns input","code":""},{"path":"/reference/read_cohort_set.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a set of cohort definitions into R — read_cohort_set","title":"Read a set of cohort definitions into R — read_cohort_set","text":"\"cohort set\" collection cohort definitions. R stored dataframe cohort_definition_id, cohort_name, cohort columns. disk stored folder CohortsToCreate.csv file one json files. CohortsToCreate.csv file missing json files folder used, cohort_definition_id automatically assigned alphabetical order, cohort_name match file names.","code":""},{"path":"/reference/read_cohort_set.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a set of cohort definitions into R — read_cohort_set","text":"","code":"read_cohort_set(path)  readCohortSet(path)"},{"path":"/reference/read_cohort_set.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a set of cohort definitions into R — read_cohort_set","text":"path path folder containing Circe cohort definition json files optionally csv file named CohortsToCreate.csv columns cohortId, cohortName, jsonPath.","code":""},{"path":"/reference/recordCohortAttrition.html","id":null,"dir":"Reference","previous_headings":"","what":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","title":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","text":"Update cohort attrition table new counts reason attrition.","code":""},{"path":"/reference/recordCohortAttrition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","text":"","code":"recordCohortAttrition(cohort, reason, cohortId = NULL)  record_cohort_attrition(cohort, reason, cohortId = NULL)"},{"path":"/reference/recordCohortAttrition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","text":"cohort generated cohort set reason reason attrition character string cohortId Cohort definition id cohort want update attrition","code":""},{"path":"/reference/recordCohortAttrition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","text":"cohort object attributes created updated.","code":""},{"path":"/reference/recordCohortAttrition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add attrition reason to a GeneratedCohortSet object — recordCohortAttrition","text":"","code":"if (FALSE) { library(CDMConnector) library(dplyr)  con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con = con, cdm_schema = \"main\", write_schema = \"main\") cdm <- generateConceptCohortSet(   cdm = cdm, conceptSet = list(pharyngitis = 4112343), name = \"new_cohort\" )  cohortSet(cdm$new_cohort) cohortCount(cdm$new_cohort) cohortAttrition(cdm$new_cohort)  cdm$new_cohort <- cdm$new_cohort %>%   filter(cohort_start_date >= as.Date(\"2010-01-01\"))  cdm$new_cohort <- updateCohortAttributes(   cohort = cdm$new_cohort, reason = \"Only events after 2010\" )  cohortSet(cdm$new_cohort) cohortCount(cdm$new_cohort) cohortAttrition(cdm$new_cohort) }"},{"path":"/reference/snapshot.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract CDM metadata — snapshot","title":"Extract CDM metadata — snapshot","text":"Extract name, version, selected record counts cdm.","code":""},{"path":"/reference/snapshot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract CDM metadata — snapshot","text":"","code":"snapshot(cdm)"},{"path":"/reference/snapshot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract CDM metadata — snapshot","text":"cdm cdm object","code":""},{"path":"/reference/snapshot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract CDM metadata — snapshot","text":"named list attributes cdm including selected fields cdm_source table record counts person observation_period tables","code":""},{"path":"/reference/snapshot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract CDM metadata — snapshot","text":"","code":"if (FALSE) { library(CDMConnector) con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con, \"main\") snapshot(cdm)  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/stow.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect a list of lazy queries and save the results as files — stow","title":"Collect a list of lazy queries and save the results as files — stow","text":"Collect list lazy queries save results files","code":""},{"path":"/reference/stow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect a list of lazy queries and save the results as files — stow","text":"","code":"stow(cdm, path, format = \"parquet\")"},{"path":"/reference/stow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect a list of lazy queries and save the results as files — stow","text":"cdm cdm object path folder save cdm object format file format use: \"parquet\" (default), \"csv\", \"feather\" \"duckdb\".","code":""},{"path":"/reference/stow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collect a list of lazy queries and save the results as files — stow","text":"Invisibly returns cdm input","code":""},{"path":"/reference/stow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Collect a list of lazy queries and save the results as files — stow","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir()) vocab <- cdm_from_con(con, \"main\") %>%   cdm_select_tbl(\"concept\", \"concept_ancestor\") stow(vocab, here::here(\"vocab_tables\")) DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/sub-.cdm_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm reference object — [.cdm_reference","title":"Subset a cdm reference object — [.cdm_reference","text":"Subset cdm reference object","code":""},{"path":"/reference/sub-.cdm_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm reference object — [.cdm_reference","text":"","code":"# S3 method for cdm_reference [(x, i)"},{"path":"/reference/sub-.cdm_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm reference object — [.cdm_reference","text":"x cdm reference name index table extract cdm object","code":""},{"path":"/reference/sub-.cdm_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm reference object — [.cdm_reference","text":"single cdm table reference","code":""},{"path":"/reference/sub-sub-.cdm_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset a cdm reference object — [[.cdm_reference","title":"Subset a cdm reference object — [[.cdm_reference","text":"Subset cdm reference object","code":""},{"path":"/reference/sub-sub-.cdm_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset a cdm reference object — [[.cdm_reference","text":"","code":"# S3 method for cdm_reference [[(x, i)"},{"path":"/reference/sub-sub-.cdm_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset a cdm reference object — [[.cdm_reference","text":"x cdm reference name index table extract cdm object","code":""},{"path":"/reference/sub-sub-.cdm_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset a cdm reference object — [[.cdm_reference","text":"single cdm table reference","code":""},{"path":"/reference/summarise_quantile.html","id":null,"dir":"Reference","previous_headings":"","what":"Quantile calculation using dbplyr — summarise_quantile","title":"Quantile calculation using dbplyr — summarise_quantile","text":"function provides DBMS independent syntax quantiles estimation. Can used combination mutate() calculating aggregate metrics (min, max, mean). summarise_quantile(), summarize_quantile(), summariseQuantile() summarizeQuantile() synonyms.","code":""},{"path":"/reference/summarise_quantile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Quantile calculation using dbplyr — summarise_quantile","text":"","code":"summarise_quantile(.data, x = NULL, probs, name_suffix = \"value\")  summarize_quantile(.data, x = NULL, probs, name_suffix = \"value\")  summariseQuantile(.data, x = NULL, probs, nameSuffix = \"value\")  summarizeQuantile(.data, x = NULL, probs, nameSuffix = \"value\")"},{"path":"/reference/summarise_quantile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Quantile calculation using dbplyr — summarise_quantile","text":".data lazy data frame backed database query. x column name whose sample quantiles wanted. probs numeric vector probabilities values [0,1]. name_suffix, nameSuffix character; appended numerical quantile value column name part.","code":""},{"path":"/reference/summarise_quantile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Quantile calculation using dbplyr — summarise_quantile","text":"object type '.data'","code":""},{"path":"/reference/summarise_quantile.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Quantile calculation using dbplyr — summarise_quantile","text":"Implemented quantiles estimation algorithm returns values analogous quantile{stats} argument type = 1. See discussion Hyndman Fan (1996). Results differ PERCENTILE_CONT natively implemented various DBMS, returned values equal quantile{stats} default argument type = 7","code":""},{"path":"/reference/summarise_quantile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Quantile calculation using dbplyr — summarise_quantile","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb()) mtcars_tbl <- dplyr::copy_to(con, mtcars, name = \"tmp\", overwrite = TRUE, temporary = TRUE)  df <- mtcars_tbl %>%  dplyr::group_by(cyl) %>%  dplyr::mutate(mean = mean(mpg, na.rm = TRUE)) %>%  summarise_quantile(mpg, probs = c(0, 0.2, 0.4, 0.6, 0.8, 1),                     name_suffix = \"quant\") %>%  dplyr::collect()  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/reference/tbl_group.html","id":null,"dir":"Reference","previous_headings":"","what":"CDM table selection helper — tbl_group","title":"CDM table selection helper — tbl_group","text":"OMOP CDM tables grouped together tbl_group function allows users easily create CDM reference including one table groups.","code":""},{"path":"/reference/tbl_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"CDM table selection helper — tbl_group","text":"","code":"tbl_group(group)  tblGroup(group)"},{"path":"/reference/tbl_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"CDM table selection helper — tbl_group","text":"group character vector CDM table groups: \"vocab\", \"clinical\", \"\", \"default\", \"derived\".","code":""},{"path":"/reference/tbl_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"CDM table selection helper — tbl_group","text":"character vector CDM tables names groups","code":""},{"path":"/reference/tbl_group.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"CDM table selection helper — tbl_group","text":"\"default\" table group meant capture commonly used set CDM tables. Currently \"default\" group : person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, device_exposure, measurement, observation, death, note, note_nlp, specimen, fact_relationship, location, care_site, provider, payer_plan_period, cost, drug_era, dose_era, condition_era, concept, vocabulary, concept_relationship, concept_ancestor, concept_synonym, drug_strength","code":""},{"path":"/reference/tbl_group.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"CDM table selection helper — tbl_group","text":"","code":"if (FALSE) { con <- DBI::dbConnect(RPostgres::Postgres(),                       dbname = \"cdm\",                       host = \"localhost\",                       user = \"postgres\",                       password = Sys.getenv(\"PASSWORD\"))  cdm <- cdm_from_con(con) %>%   cdm_select_tbl(tbl_group(\"vocab\")) }"},{"path":"/reference/union_cohorts.html","id":null,"dir":"Reference","previous_headings":"","what":"Union all cohorts in a single cohort table — union_cohorts","title":"Union all cohorts in a single cohort table — union_cohorts","text":"Union cohorts single cohort table","code":""},{"path":"/reference/union_cohorts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Union all cohorts in a single cohort table — union_cohorts","text":"","code":"union_cohorts(x, cohort_definition_id = 1L)  unionCohorts(x, cohort_definition_id = 1L)"},{"path":"/reference/union_cohorts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Union all cohorts in a single cohort table — union_cohorts","text":"x tbl reference cohort table cohort_definition_id number use new cohort_definition_id","code":""},{"path":"/reference/union_cohorts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Union all cohorts in a single cohort table — union_cohorts","text":"lazy query executed resolve new cohort table one cohort_definition_id resulting union cohorts original cohort table","code":""},{"path":"/reference/uniqueTableName.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a unique table name for temp tables — uniqueTableName","title":"Create a unique table name for temp tables — uniqueTableName","text":"Create unique table name temp tables","code":""},{"path":"/reference/uniqueTableName.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a unique table name for temp tables — uniqueTableName","text":"","code":"uniqueTableName()  unique_table_name()"},{"path":"/reference/uniqueTableName.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a unique table name for temp tables — uniqueTableName","text":"string can used dbplyr temp table name","code":""},{"path":"/reference/validate_cdm.html","id":null,"dir":"Reference","previous_headings":"","what":"Validation report for a CDM — validate_cdm","title":"Validation report for a CDM — validate_cdm","text":"Print short validation report cdm object. validation includes checking column names correct tables empty. short report printed console. function meant interactive use.","code":""},{"path":"/reference/validate_cdm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validation report for a CDM — validate_cdm","text":"","code":"validate_cdm(cdm)  validateCdm(cdm)"},{"path":"/reference/validate_cdm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validation report for a CDM — validate_cdm","text":"cdm cdm reference object.","code":""},{"path":"/reference/validate_cdm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validation report for a CDM — validate_cdm","text":"Invisibly returns cdm input","code":""},{"path":"/reference/validate_cdm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validation report for a CDM — validate_cdm","text":"","code":"if (FALSE) { con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con, cdm_schema = \"main\") validate_cdm(cdm) DBI::dbDisconnect(con) }"},{"path":"/reference/version.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the CDM version — version","title":"Get the CDM version — version","text":"Extract CDM version attribute cdm_reference object","code":""},{"path":"/reference/version.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the CDM version — version","text":"","code":"version(cdm)"},{"path":"/reference/version.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the CDM version — version","text":"cdm cdm object","code":""},{"path":"/reference/version.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the CDM version — version","text":"\"5.3\" \"5.4\"","code":""},{"path":"/reference/version.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the CDM version — version","text":"","code":"if (FALSE) { library(CDMConnector) con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir()) cdm <- cdm_from_con(con, \"main\") version(cdm)  DBI::dbDisconnect(con, shutdown = TRUE) }"},{"path":"/news/index.html","id":"cdmconnector-114","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.1.4","title":"CDMConnector 1.1.4","text":"CRAN release: 2023-10-20 Fix recursive edge cases cdm reference issue.","code":""},{"path":"/news/index.html","id":"cdmconnector-113","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.1.3","title":"CDMConnector 1.1.3","text":"CRAN release: 2023-10-14 Fix recursive cdm reference issue. Thanks @catalamarti!","code":""},{"path":"/news/index.html","id":"cdmconnector-112","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.1.2","title":"CDMConnector 1.1.2","text":"CRAN release: 2023-08-22 fix failing test CRAN","code":""},{"path":"/news/index.html","id":"cdmconnector-111","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.1.1","title":"CDMConnector 1.1.1","text":"CRAN release: 2023-08-22 add bigquery support August 22, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-110","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.1.0","title":"CDMConnector 1.1.0","text":"CRAN release: 2023-08-17 add copy_cdm_to, copyCdmTo add generate_concept_cohort_set, generateConceptCohortSet add example CDM datasets add record_cohort_attrition, recordCohortAttrition improve database test coverage update vignettes Released Aug 17, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-100","dir":"Changelog","previous_headings":"","what":"CDMConnector 1.0.0","title":"CDMConnector 1.0.0","text":"CRAN release: 2023-06-12 remove write_prefix cdm_from_con favor using write_schema argument prefixing remove cdm_tables argument cdm_from_con favor cdm_select_tbl selection function add attributes cdm object communicate downstream temp table preferences Released June 7, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-060","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.6.0","title":"CDMConnector 0.6.0","text":"CRAN release: 2023-05-05 generate Capr cohorts generateCohortSet add datepart function extracting year, month, day parts dates dplyr fix datediff logic years now returns number complete years two date add “write_prefix” attribute cdm objects support namespace within write_schema Released May 5, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-051","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.5.1","title":"CDMConnector 0.5.1","text":"CRAN release: 2023-03-22 Add camelCase snake_case versions functions (@Tsemharb) Add cdm object attributes cdm_snapshot output use number_records number_subjects cohort counts table Minor bug fixes Released March 20, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-050","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.5.0","title":"CDMConnector 0.5.0","text":"CRAN release: 2023-03-09 Define generatedCohortSet class Add summarize_quantile cross database quantile queries Add GeneratedCohortSet object, constructor, attribute accessor functions Add vignette cohort generation Add cdmSubset, cdmSubsetCohort, cdmSample subsetting cdm Add cdmFlatten transforming cdm single flat table observations Improve test coverage Make Java dependency optional cdm_schema now required cdm_from_con except duckdb connections Remove visit_detail default cdm tables Deprecate computePermanent Improve package website Substantial contributions @edward-burn, @catalamarti, @Tsemharb now package co-authors. Released Mar 8, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-041","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.4.1","title":"CDMConnector 0.4.1","text":"CRAN release: 2023-01-24 Add computeQuery function creating temp persistent tables dplyr queries Download Eunomia darwin-eu repository zipped csv files Add passing tests Oracle Spark Add asDate wrapper provides correct .Date dbplyr translations Incorporate code review suggestions @mvankessel-EMC Released Jan 21, 2023","code":""},{"path":"/news/index.html","id":"cdmconnector-030","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.3.0","title":"CDMConnector 0.3.0","text":"CRAN release: 2022-11-29 Add computePermanent appendPermanent functions Add readCohortSet Add generateCohortSet Extract Eunomia dataset downloaded separately Released Nov 29, 2022","code":""},{"path":"/news/index.html","id":"cdmconnector-020","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.2.0","title":"CDMConnector 0.2.0","text":"Add support OMOP v5.3 v5.4 Add datediff dateadd functions can used dplyr::mutate() Add assert_tables function checking cdm object required tables Add camelCase versions several functions Released Nov 15, 2022","code":""},{"path":"/news/index.html","id":"cdmconnector-010","dir":"Changelog","previous_headings":"","what":"CDMConnector 0.1.0","title":"CDMConnector 0.1.0","text":"CRAN release: 2022-09-29 Initial release Sept 11, 2022 Added NEWS.md file track changes package.","code":""}]
